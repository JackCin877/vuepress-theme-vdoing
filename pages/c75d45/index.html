<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Express | JackCin&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/vuepress-theme-vdoing/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/vuepress-theme-vdoing/assets/css/0.styles.d3d6617d.css" as="style"><link rel="preload" href="/vuepress-theme-vdoing/assets/js/app.ef19247d.js" as="script"><link rel="preload" href="/vuepress-theme-vdoing/assets/js/2.59d30681.js" as="script"><link rel="preload" href="/vuepress-theme-vdoing/assets/js/51.54e3e0f5.js" as="script"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/10.895e47cd.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/100.65264761.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/101.4227158e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/102.f7fe8fb6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/103.e938df0b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/104.813d1e73.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/105.9cadadc4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/106.7c77f682.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/107.82ef198e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/108.239ee938.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/109.f41dec57.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/11.afdc1626.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/110.718841c6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/111.af0c9f6c.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/112.ded809e7.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/113.4b0e2248.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/114.5f1e0cca.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/115.d3bfb97a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/116.bea7171d.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/117.58e52c58.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/118.9f68c88a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/119.68f51359.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/12.d5fdc288.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/120.73fe5367.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/121.51d7018c.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/122.cf65245e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/123.f0409c02.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/13.88195303.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/14.5efb7e20.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/15.5d17711a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/16.d4ee57a8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/17.6241a69b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/18.5fe1c413.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/19.99d38ce9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/20.802498de.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/21.d8fe6e3b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/22.e54fc887.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/23.4d468f03.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/24.80e6b4d1.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/25.fd7335b6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/26.514dcbb3.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/27.4ba9baf9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/28.fe7b813f.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/29.92843dc7.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/3.b222f77d.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/30.aa8da716.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/31.c330d000.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/32.aa4aeaf8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/33.efc5afb4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/34.f788eebe.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/35.1c9cb0c9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/36.98662805.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/37.ee2e1ae8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/38.b99e909b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/39.99693b52.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/4.8052d648.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/40.886d8383.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/41.a2baf11f.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/42.88d7c3f4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/43.3426d73a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/44.17e65dff.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/45.9f3a181b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/46.d2bbd4a8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/47.0069af15.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/48.427f0e94.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/49.6e4c55aa.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/5.0a7800d5.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/50.0f9664f8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/52.c6861735.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/53.56794768.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/54.5422e26a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/55.34e95002.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/56.09649c5a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/57.79c5317f.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/58.c4607eea.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/59.001ead66.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/6.f4a7523e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/60.f509a114.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/61.a2f3e83c.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/62.0b55350e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/63.e7f1cfd6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/64.25da2825.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/65.9dcd5846.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/66.b37138f3.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/67.2498daaf.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/68.3211a118.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/69.d1221121.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/7.122cf2b2.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/70.8b7ff9d4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/71.67dae2cc.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/72.d538ddbc.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/73.2e00bd36.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/74.39b37722.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/75.18b59a37.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/76.e08c97ed.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/77.e1e6855a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/78.137352f0.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/79.0c8e9414.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/8.3304a2cd.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/80.d2c142fd.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/81.ce37cce5.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/82.12e52dc4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/83.5ae3c013.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/84.2908f5f9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/85.89eb409e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/86.6197f3b8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/87.5acaa8b4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/88.cb33954e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/89.bec70e95.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/9.2a799cd7.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/90.4d3dbdf5.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/91.9147f662.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/92.2ec1cc34.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/93.f4079504.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/94.128a7998.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/95.ea8b5589.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/96.2494e777.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/97.deea76f2.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/98.4c611d73.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/99.897092d3.js">
    <link rel="stylesheet" href="/vuepress-theme-vdoing/assets/css/0.styles.d3d6617d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-theme-vdoing/" class="home-link router-link-active"><img src="/vuepress-theme-vdoing/img/logo.png" alt="JackCin's blog" class="logo"> <span class="site-name can-hide">JackCin's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-theme-vdoing/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vuepress-theme-vdoing/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/html/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/css/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js基础/" class="nav-link">JavaScript基础</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js高级/" class="nav-link">JavaScript高级</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/vue/" class="nav-link"> Vue</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><a href="/vuepress-theme-vdoing/up/" class="link-title">进阶</a> <span class="title" style="display:none;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/jquery/" class="nav-link">jQuery</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/d91b9c/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/fee75e/" class="nav-link">Ajax</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-theme-vdoing/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/vuepress-theme-vdoing/计算机基础/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/操作系统/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/数据结构与算法/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="单片机" class="dropdown-title"><a href="/vuepress-theme-vdoing/单片机/" class="link-title">单片机</a> <span class="title" style="display:none;">单片机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/51单片机/" class="nav-link">51单片机</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/c75d45/404" class="nav-link">CC2530</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vuepress-theme-vdoing/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/JackCin877/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://jackcin877.github.io/image-hosting/blog/%E5%A4%8F%E7%9B%AE.4npqayre72c0.jpg"> <div class="blogger-info"><h3>JackCin</h3> <span>前端小菜鸡(✪ω✪)</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepress-theme-vdoing/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vuepress-theme-vdoing/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/html/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/css/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js基础/" class="nav-link">JavaScript基础</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js高级/" class="nav-link">JavaScript高级</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/vue/" class="nav-link"> Vue</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><a href="/vuepress-theme-vdoing/up/" class="link-title">进阶</a> <span class="title" style="display:none;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/jquery/" class="nav-link">jQuery</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/d91b9c/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/fee75e/" class="nav-link">Ajax</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-theme-vdoing/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/vuepress-theme-vdoing/计算机基础/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/操作系统/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/数据结构与算法/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="单片机" class="dropdown-title"><a href="/vuepress-theme-vdoing/单片机/" class="link-title">单片机</a> <span class="title" style="display:none;">单片机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/51单片机/" class="nav-link">51单片机</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/c75d45/404" class="nav-link">CC2530</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vuepress-theme-vdoing/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/JackCin877/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jQuery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Node</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-theme-vdoing/pages/d91b9c/" class="sidebar-link">初识 node.js与内置模块</a></li><li><a href="/vuepress-theme-vdoing/pages/5f6e79/" class="sidebar-link">模块化</a></li><li><a href="/vuepress-theme-vdoing/pages/c75d45/" aria-current="page" class="active sidebar-link">Express</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/c75d45/#一、初识-express" class="sidebar-link">一、初识 Express</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1、express-简介" class="sidebar-link">1、Express 简介</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-1-什么是-express" class="sidebar-link">1.1 什么是 Express</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-2-进一步理解-express" class="sidebar-link">1.2 进一步理解 Express</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2、express-的基本使用" class="sidebar-link">2、Express 的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-1-安装" class="sidebar-link">2.1 安装</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-2-创建基本的-web-服务器" class="sidebar-link">2.2 创建基本的 Web 服务器</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-3-监听-get-请求" class="sidebar-link">2.3 监听 GET 请求</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-4-监听-post-请求" class="sidebar-link">2.4 监听 POST 请求</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-5-把内容响应给客户端" class="sidebar-link">2.5 把内容响应给客户端</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-6-获取-url-中携带的查询参数" class="sidebar-link">2.6 获取 URL 中携带的查询参数</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-7-获取-url-中的动态参数" class="sidebar-link">2.7 获取 URL 中的动态参数</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3、托管静态资源" class="sidebar-link">3、托管静态资源</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-1-express-static" class="sidebar-link">3.1 express.static()</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-2-托管多个静态资源目录" class="sidebar-link">3.2 托管多个静态资源目录</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-3-挂载路径前缀" class="sidebar-link">3.3 挂载路径前缀</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4、nodemon" class="sidebar-link">4、nodemon</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-1-为什么要使用-nodemon" class="sidebar-link">4.1 为什么要使用 nodemon</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-2-安装-nodemon" class="sidebar-link">4.2 安装 nodemon</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-3-使用-nodemon" class="sidebar-link">4.3 使用 nodemon</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/c75d45/#二-、express-路由" class="sidebar-link">二 、Express 路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1、-路由的概念" class="sidebar-link">1、 路由的概念</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-1-什么是路由" class="sidebar-link">1.1 什么是路由</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-2-现实生活中的路由" class="sidebar-link">1.2 现实生活中的路由</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-3-exprress-中的路由" class="sidebar-link">1.3 Exprress 中的路由</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-4-exprees-中的路由的例子" class="sidebar-link">1.4 Exprees 中的路由的例子</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-5-路由的匹配过程" class="sidebar-link">1.5 路由的匹配过程</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2、路由的使用" class="sidebar-link">2、路由的使用</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-1-最简单的使用" class="sidebar-link">2.1 最简单的使用</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-2-模块化路由" class="sidebar-link">2.2 模块化路由</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-3-创建路由模块" class="sidebar-link">2.3 创建路由模块</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-4-注册路由模块" class="sidebar-link">2.4 注册路由模块</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-5-为路由模块添加前缀" class="sidebar-link">2.5 为路由模块添加前缀</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/c75d45/#三、express-中间件" class="sidebar-link">三、Express 中间件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1、中间件的概念" class="sidebar-link">1、中间件的概念</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-1-什么是中间件" class="sidebar-link">1.1 什么是中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-2-现实生活里的例子" class="sidebar-link">1.2 现实生活里的例子</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-3-express-中间件的调用流程" class="sidebar-link">1.3 Express 中间件的调用流程</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-4-express-中间件的格式" class="sidebar-link">1.4 Express 中间件的格式</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1-5-next-函数的作用" class="sidebar-link">1.5 next 函数的作用</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2、-express-中间件的初体验" class="sidebar-link">2、 Express 中间件的初体验</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-1-定义中间件函数" class="sidebar-link">2.1 定义中间件函数</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-2-全局生效的中间件" class="sidebar-link">2.2 全局生效的中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-3-定义全局中间件的简化形式" class="sidebar-link">2.3 定义全局中间件的简化形式</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-4-中间件的作用" class="sidebar-link">2.4 中间件的作用</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-5-定义多个全局中间件" class="sidebar-link">2.5 定义多个全局中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-6-局部生效的中间件" class="sidebar-link">2.6 局部生效的中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-7-定义多个局部中间件" class="sidebar-link">2.7 定义多个局部中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2-8-了解中间件的5个使用注意事项" class="sidebar-link">2.8 了解中间件的5个使用注意事项</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3、-中间件的分类" class="sidebar-link">3、 中间件的分类</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-1-应用级别的中间件" class="sidebar-link">3.1 应用级别的中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-2-路由级别的中间件" class="sidebar-link">3.2 路由级别的中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-3-错误级别的中间件" class="sidebar-link">3.3 错误级别的中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-4-express-内置的中间件" class="sidebar-link">3.4 Express 内置的中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3-5-第三方的中间件" class="sidebar-link">3.5 第三方的中间件</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4、-自定义中间件" class="sidebar-link">4、 自定义中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-1-需求描述与实现步骤" class="sidebar-link">4.1 需求描述与实现步骤</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-2-定义中间件" class="sidebar-link">4.2 定义中间件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-3-监听-req-的-data-事件" class="sidebar-link">4.3 监听 req 的 data 事件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-4-监听-req-的-end-事件" class="sidebar-link">4.4 监听 req 的 end 事件</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-5-使用-querystring-模块解析请求体数据" class="sidebar-link">4.5 使用 querystring 模块解析请求体数据</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-6-将解析出来的数据对象挂载为-req-body" class="sidebar-link">4.6 将解析出来的数据对象挂载为 req.body</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4-7-将自定义中间件封装为模块" class="sidebar-link">4.7 将自定义中间件封装为模块</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/c75d45/#四、使用-express-写接口" class="sidebar-link">四、使用 Express 写接口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_1、创建基本的服务器" class="sidebar-link">1、创建基本的服务器</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_2、-创建-api-路由模块" class="sidebar-link">2、 创建 API 路由模块</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_3、-编写-get-接口" class="sidebar-link">3、 编写 GET 接口</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_4、-编写-post-接口" class="sidebar-link">4、 编写 POST 接口</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5、cors-跨域资源共享" class="sidebar-link">5、CORS 跨域资源共享</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-1-接口的跨域问题" class="sidebar-link">5.1 接口的跨域问题</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-2-使用-cors中间件解决跨域问题" class="sidebar-link">5.2 使用 cors中间件解决跨域问题</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-3-什么是-cors" class="sidebar-link">5.3 什么是 CORS</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-4-cors-的注意事项" class="sidebar-link">5.4 CORS 的注意事项</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-5-cors-响应头部-access-control-allow-origin" class="sidebar-link">5.5  CORS 响应头部 - Access-Control-Allow-Origin</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-6-cors-响应头部-access-control-allow-headers" class="sidebar-link">5.6 CORS 响应头部 - Access-Control-Allow-Headers</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-7-cors-响应头部-access-control-allow-methods" class="sidebar-link">5.7 CORS 响应头部  - Access-Control-Allow-Methods</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-8-cors请求的分类" class="sidebar-link">5.8 CORS请求的分类</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-9-简单请求" class="sidebar-link">5.9 简单请求</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-10-预检请求" class="sidebar-link">5.10 预检请求</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_5-11-简单请求和预检请求的区别" class="sidebar-link">5.11 简单请求和预检请求的区别</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/c75d45/#_6、jsonp-接口" class="sidebar-link">6、JSONP 接口</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_6-1-回顾-jsonp-的概念与特点" class="sidebar-link">6.1 回顾 JSONP 的概念与特点</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_6-2-创建-jsonp-接口的注意事项" class="sidebar-link">6.2 创建 JSONP 接口的注意事项</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_6-3-实现-jsonp-接口的步骤" class="sidebar-link">6.3 实现 JSONP 接口的步骤</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_6-4-实现-jsonp-接口的具体代码" class="sidebar-link">6.4 实现 JSONP 接口的具体代码</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/c75d45/#_6-5-再网页中使用-jquery-发起-jsonp请求" class="sidebar-link">6.5 再网页中使用 jQuery 发起 JSONP请求</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ajax</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/vuepress-theme-vdoing/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/vuepress-theme-vdoing/up/#进阶" data-v-06225672>进阶</a></li><li data-v-06225672><a href="/vuepress-theme-vdoing/up/#Node" data-v-06225672>Node</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/JackCin877" target="_blank" title="作者" class="beLink" data-v-06225672>JackCin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-11-10</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Express<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="一、初识-express"><a href="#一、初识-express" class="header-anchor">#</a> 一、初识 Express</h2> <h3 id="_1、express-简介"><a href="#_1、express-简介" class="header-anchor">#</a> 1、Express 简介</h3> <h4 id="_1-1-什么是-express"><a href="#_1-1-什么是-express" class="header-anchor">#</a> 1.1 什么是 Express</h4> <ul><li>官方给出的概念：Express 是<strong>基于 Node.js 平台</strong>，<em>快速、开放、极简</em>的 <strong>Web 开发框架</strong>。</li> <li>通俗的理解：Express 的作用和 Node.js 内置的 http 模块类似，<strong>是专门用来创建 Web 服务器的</strong>。</li> <li><strong>Express 的本质</strong>：就是一个 npm 上的第三方包，提供了快速创建 Web 服务器的便捷方法。</li> <li>Express 的中文官网： <a href="http://www.expressjs.com.cn/" target="_blank" rel="noopener noreferrer">http://www.expressjs.com.cn/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="_1-2-进一步理解-express"><a href="#_1-2-进一步理解-express" class="header-anchor">#</a> 1.2 进一步理解 Express</h4> <ul><li><p>思考：不使用 Express 能否创建 Web 服务器？</p> <ul><li>答案：能，使用 Node.js 提供的原生 http 模块即可。</li></ul></li> <li><p>思考：既生瑜何生亮（有了 http 内置模块，为什么还有用 Express）？</p> <ul><li>答案：http 内置模块用起来很复杂，开发效率低；Express 是基于内置的 http 模块进一步封装出来的，能够极大的提高开发效率。</li></ul></li> <li><p>思考：http 内置模块与 Express 是什么关系？</p> <ul><li>答案：类似于浏览器中 Web API 和 jQuery 的关系。后者是基于前者进一步封装出来的。</li></ul></li></ul> <h5 id="_1-3-express-能做什么"><a href="#_1-3-express-能做什么" class="header-anchor">#</a> 1.3 Express 能做什么</h5> <p>对于前端程序员来说，最常见的<em>两种</em> 服务器，分别是：</p> <ul><li><strong>Web 网站服务器</strong>：专门对外提供 Web 网页资源的服务器。</li> <li><strong>API 接口服务器</strong>：专门对外提供 API 接口的服务器。</li></ul> <p>使用 Express，我们可以方便、快速的创建 <strong>Web 网站</strong>的服务器或 <strong>API 接口</strong>的服务器。</p> <h3 id="_2、express-的基本使用"><a href="#_2、express-的基本使用" class="header-anchor">#</a> 2、Express 的基本使用</h3> <h4 id="_2-1-安装"><a href="#_2-1-安装" class="header-anchor">#</a> 2.1 安装</h4> <p>在项目所处的目录中，运行如下的终端命令，即可将 express 安装到项目中使用：</p> <p>​		<code>npm i express@4.17.1</code></p> <h4 id="_2-2-创建基本的-web-服务器"><a href="#_2-2-创建基本的-web-服务器" class="header-anchor">#</a> 2.2 创建基本的 Web 服务器</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>

<span class="token comment">// 2. 创建 web 服务器</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 挂载路由（如果只是要创建web服务器的话，是可以不写下面两个请求的）</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'hello world.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Post Request.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 3.调用 app.listen (端口号，启动成功后的回调函数) 启动 web 服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_2-3-监听-get-请求"><a href="#_2-3-监听-get-请求" class="header-anchor">#</a> 2.3 监听 GET 请求</h4> <p>通过 <code>app.get()</code> 方法，可以监听客户端的 GET 请求，具体的语法格式如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 参数1： 客户端请求的 URL 地址</span>
<span class="token comment">// 参数2：请求对应得处理函数</span>
<span class="token comment">//      req：请求对象 （包含了与请求相关的属性与方法）</span>
<span class="token comment">//		res：响应对象  (包含了与响应相关的属性与方法)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'请求URL'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">/*处理函数*/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-4-监听-post-请求"><a href="#_2-4-监听-post-请求" class="header-anchor">#</a> 2.4 监听 POST 请求</h4> <p>通过 <code>app.post()</code> 方法，可以监听客户端的 POST 请求，具体的语法格式如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 参数1： 客户端请求的 URL 地址</span>
<span class="token comment">// 参数2：请求对应得处理函数</span>
<span class="token comment">//      req：请求对象 （包含了与请求相关的属性与方法）</span>
<span class="token comment">//		res：响应对象  (包含了与响应相关的属性与方法)</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'请求URL'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">/*处理函数*/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-5-把内容响应给客户端"><a href="#_2-5-把内容响应给客户端" class="header-anchor">#</a> 2.5 把内容响应给客户端</h4> <p>通过 <code>res.send()</code> 方法，可以把处理好的内容，发送给客户端：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 4. 监听客户端的 GET 和 POST 请求，并向客户端响应具体的内容</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用 express 提供的 res.send() 方法，向客户端响应一个 JSON 对象</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token string">'男'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用 express 提供的 res.send() 方法，向客户端响应一个 文本字符串</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_2-6-获取-url-中携带的查询参数"><a href="#_2-6-获取-url-中携带的查询参数" class="header-anchor">#</a> 2.6 获取 URL 中携带的查询参数</h4> <p>​		通过 <strong><code>req.query</code></strong> 对象，可以访问到客户端通过<strong>查询字符串</strong>的形式，发送到服务器的参数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 通过 req.query 可以获取到客户端发送过来的 查询参数</span>
  <span class="token comment">// 注意：默认情况下，req.query 是一个空对象</span>
  <span class="token comment">//客户端使用 ?name=zs&amp;age=20 这种查询字符串的形式，发送到服务器的参数，可以通过 	req.query 对象访问到，例如：</span>
  <span class="token comment">// req.query.name    req.query.age</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2-7-获取-url-中的动态参数"><a href="#_2-7-获取-url-中的动态参数" class="header-anchor">#</a> 2.7 获取 URL 中的动态参数</h4> <p>​	通过 <strong><code>req.params</code></strong> 对象，可以访问到 URL 中，通过 : 匹配到的动态参数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意：这里的 :id 是一个动态的参数</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/:ids/:username'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// req.params 是动态匹配到的 URL 参数，默认也是一个空对象</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://jackcin877.github.io/image-hosting/Node/%E8%8E%B7%E5%8F%96-URL-%E4%B8%AD%E7%9A%84%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0.2t7dqfjk4xk0.jpg" alt="获取-URL-中的动态参数"></p> <h3 id="_3、托管静态资源"><a href="#_3、托管静态资源" class="header-anchor">#</a> 3、托管静态资源</h3> <h4 id="_3-1-express-static"><a href="#_3-1-express-static" class="header-anchor">#</a> 3.1 express.static()</h4> <p>​		express 提供了一个非常好用的函数，叫做 <strong>express.static()</strong>，通过它，我们可以非常方便地创建一个<strong>静态资源服务器</strong>， 例如，通过如下代码就可以将 public 目录下的图片、CSS 文件、JavaScript 文件对外开放访问了：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在，你就可以访问 public 目录中的所有文件了：</p> <ul><li>http://localhost:3000/images/bg.jpg</li> <li>http://localhost:3000/css/style.css</li> <li>http://localhost:3000/js/login.js</li></ul> <p>注意：Express 在<strong>指定的</strong>静态目录中查找文件，并对外提供资源的访问路径。 因此，<strong>存放静态文件的目录名不会出现在 URL 中。</strong></p> <h4 id="_3-2-托管多个静态资源目录"><a href="#_3-2-托管多个静态资源目录" class="header-anchor">#</a> 3.2 托管多个静态资源目录</h4> <p>如果要托管多个静态资源目录，请多次调用 express.static() 函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'files'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>访问静态资源文件时，express.static() 函数会根据目录的添加顺序查找所需的文件。</p> <p>好比上面代码里，托管的public、files两个文件夹中都有index.html文件，此时启动服务器，浏览 index.html 路径，此时只要public文件中有 index.html 文件，就打开 public文件中的 index页面，如果没有才会访问 files 文件</p> <h4 id="_3-3-挂载路径前缀"><a href="#_3-3-挂载路径前缀" class="header-anchor">#</a> 3.3 挂载路径前缀</h4> <p>如果希望在托管的<strong>静态资源访问路径</strong>之前，<strong>挂载路径前缀</strong>，则可以使用如下的方式：</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/public'</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>现在，你就可以通过带有 /public 前缀地址来访问 public 目录中的文件了：</p> <ul><li>http://localhost:3000/public/images/kitten.jpg</li> <li>http://localhost:3000/public/css/style.css</li> <li>http://localhost:3000/public/js/app.js</li></ul> <h3 id="_4、nodemon"><a href="#_4、nodemon" class="header-anchor">#</a> 4、nodemon</h3> <h4 id="_4-1-为什么要使用-nodemon"><a href="#_4-1-为什么要使用-nodemon" class="header-anchor">#</a> 4.1 为什么要使用 nodemon</h4> <p>​		在编写调试 Node.js 项目的时候，如果修改了项目的代码，则需要频繁的手动 close 掉，然后再重新启动，非常繁琐。</p> <p>现在，我们可以使用 nodemon（<a href="https://www.npmjs.com/package/nodemon" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/nodemon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>） 这个工具，它能够<strong>监听项目文件的变动</strong>，当代码被修改后，nodemon 会<strong>自动帮我们重启项目</strong>，极大方便了开发和调试。</p> <h4 id="_4-2-安装-nodemon"><a href="#_4-2-安装-nodemon" class="header-anchor">#</a> 4.2 安装 nodemon</h4> <p>在终端中，运行如下命令，即可将 nodemon 安装为全局可用的工具：</p> <p>​		<code>npm install -g nodemon</code></p> <h4 id="_4-3-使用-nodemon"><a href="#_4-3-使用-nodemon" class="header-anchor">#</a> 4.3 使用 nodemon</h4> <p>​		当基于 Node.js 编写了一个网站应用的时候，传统的方式，是运行 <strong>node app.js</strong> 命令，来启动项目。这样做的坏处是： 代码被修改之后，需要手动重启项目。</p> <p>​		现在，我们可以将 node 命令替换为 nodemon 命令，使用 <strong>nodemon app.js</strong> 来启动项目。这样做的好处是：代码 被修改之后，会被 nodemon 监听到，从而实现自动重启项目的效果。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>node app<span class="token punctuation">.</span>js
<span class="token comment">//将上面的终端命令，替换为下面的终端命令，即可实现自动重启项目的效果</span>
nodemon app<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="二-、express-路由"><a href="#二-、express-路由" class="header-anchor">#</a> 二 、Express 路由</h2> <h3 id="_1、-路由的概念"><a href="#_1、-路由的概念" class="header-anchor">#</a> 1、 路由的概念</h3> <h4 id="_1-1-什么是路由"><a href="#_1-1-什么是路由" class="header-anchor">#</a> 1.1 什么是路由</h4> <p>​		广义上来讲，路由就是<strong>映射关系</strong>。</p> <h4 id="_1-2-现实生活中的路由"><a href="#_1-2-现实生活中的路由" class="header-anchor">#</a> 1.2 现实生活中的路由</h4> <p><img src="https://jackcin877.github.io/image-hosting/Node/%E7%8E%B0%E5%AE%9E%E7%94%9F%E6%B4%BB%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1.13ix3zq87nk0.jpg" alt="现实生活中的路由"></p> <p>在这里，路由是<strong>按键</strong>与<strong>服务</strong>之间的<strong>映射关系</strong></p> <h4 id="_1-3-exprress-中的路由"><a href="#_1-3-exprress-中的路由" class="header-anchor">#</a> 1.3 Exprress 中的路由</h4> <ul><li>在 Express 中，路由指的是<strong>客户端的请求</strong>与<strong>服务器处理函数</strong>之间的映射关系。</li> <li>Express 中的路由分 3 部分组成，分别是<strong>请求的类型</strong>、<strong>请求的 URL 地址</strong>、<strong>处理函数</strong>，格式如下：
<ul><li><strong><code>app.METHOD(PATH,HANDLER)</code></strong></li></ul></li></ul> <h4 id="_1-4-exprees-中的路由的例子"><a href="#_1-4-exprees-中的路由的例子" class="header-anchor">#</a> 1.4 Exprees 中的路由的例子</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//匹配 GET 请求，且请求 URL 为 /</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'hello world.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//匹配 POST 请求，且请求 URL 为 /</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Post Request.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_1-5-路由的匹配过程"><a href="#_1-5-路由的匹配过程" class="header-anchor">#</a> 1.5 路由的匹配过程</h4> <p>​		每当一个请求到达服务器之后，<strong>需要先经过路由的匹配</strong>，只有匹配成功之后，才会调用对应的处理函数。</p> <p>​		在匹配时，会按照路由的顺序进行匹配，如果<strong>请求类型</strong>和<strong>请求的 URL</strong> 同时匹配成功，则 Express 会将这次请求，转交给对应的 function 函数进行处理。</p> <p><img src="https://jackcin877.github.io/image-hosting/Node/%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8C%B9%E9%85%8D%E8%BF%87%E7%A8%8B.69bdrvqejvg0.jpg" alt="路由的匹配过程"></p> <ul><li>路由匹配的注意点：
<ul><li>① 按照定义的<strong>先后顺序</strong>进行匹配</li> <li>② <strong>请求类型</strong>和<strong>请求的URL</strong>同时匹配成功， 才会调用对应的处理函数</li></ul></li></ul> <h3 id="_2、路由的使用"><a href="#_2、路由的使用" class="header-anchor">#</a> 2、路由的使用</h3> <h4 id="_2-1-最简单的使用"><a href="#_2-1-最简单的使用" class="header-anchor">#</a> 2.1 最简单的使用</h4> <p>在 Express 中使用路由最简单的方式，就是把路由挂载到 app 上，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">//创建 web 服务器，命名为 app</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 挂载路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'hello world.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Post Request.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//启动 web 服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server runing http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_2-2-模块化路由"><a href="#_2-2-模块化路由" class="header-anchor">#</a> 2.2 模块化路由</h4> <p>​		为了<strong>方便对路由进行模块化的管理</strong>，Express <strong>不建议</strong>将路由直接挂载到 app 上，而是<strong>推荐将路由抽离为单独的模块</strong>。 将路由抽离为单独模块的步骤如下：</p> <ul><li>① 创建路由模块对应的 .js 文件</li> <li>② 调用 <strong><code>express.Router()</code></strong> 函数创建路由对象</li> <li>③ 向路由对象上挂载具体的路由</li> <li>④ 使用 <strong><code>module.exports</code></strong> 向外共享路由对象</li> <li>⑤ 使用 <strong><code>app.use()</code></strong> 函数注册路由模块</li></ul> <h4 id="_2-3-创建路由模块"><a href="#_2-3-创建路由模块" class="header-anchor">#</a> 2.3 创建路由模块</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//这里就是 03.router.js 文件 </span>

<span class="token comment">// 1. 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 2. 创建路由对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 3. 挂载具体的路由</span>
<span class="token comment">//挂载获取用户列表的路由</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/list'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Get user list.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//挂载添加用户的路由</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/add'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Add new user.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 4. 向外导出路由对象</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="_2-4-注册路由模块"><a href="#_2-4-注册路由模块" class="header-anchor">#</a> 2.4 注册路由模块</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 导入路由模块</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./03.router'</span><span class="token punctuation">)</span>

<span class="token comment">// 2. 使用 app.use() 注册路由模块</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-5-为路由模块添加前缀"><a href="#_2-5-为路由模块添加前缀" class="header-anchor">#</a> 2.5 为路由模块添加前缀</h4> <p>​		类似于托管静态资源时，为静态资源统一挂载访问前缀一样，路由模块添加前缀的方式也非常简单：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 导入路由模块</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./03.router'</span><span class="token punctuation">)</span>

<span class="token comment">// 2. 使用 app.use() 注册路由模块，并添加统一的访问前缀 /api</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="三、express-中间件"><a href="#三、express-中间件" class="header-anchor">#</a> 三、Express 中间件</h2> <h3 id="_1、中间件的概念"><a href="#_1、中间件的概念" class="header-anchor">#</a> 1、中间件的概念</h3> <h4 id="_1-1-什么是中间件"><a href="#_1-1-什么是中间件" class="header-anchor">#</a> 1.1 什么是中间件</h4> <p>​		中间件（Middleware）,特指 <strong>业务流程</strong> 的 <strong>中间处理环节</strong>。</p> <h4 id="_1-2-现实生活里的例子"><a href="#_1-2-现实生活里的例子" class="header-anchor">#</a> 1.2 现实生活里的例子</h4> <p>​		在处理污水的时候，一般都要经过三个<strong>处理环节</strong>，从而保证处理过后的废水，达到排放标准。 处理污水的这三个中间处理环节，就可以叫做中间件。</p> <p><img src="https://jackcin877.github.io/image-hosting/Node/%E7%8E%B0%E5%AE%9E%E7%94%9F%E6%B4%BB%E4%B8%AD%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E4%BE%8B%E5%AD%90.43gb4x6av880.jpg" alt="现实生活中中间件的例子"></p> <h4 id="_1-3-express-中间件的调用流程"><a href="#_1-3-express-中间件的调用流程" class="header-anchor">#</a> 1.3 Express 中间件的调用流程</h4> <p>​		当一个请求到达 Express 的服务器之后，可以连续调用多个中间件，从而对这次请求进行<strong>预处理</strong>。</p> <p><img src="https://jackcin877.github.io/image-hosting/Node/Express-%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E8%B0%83%E7%94%A8%E6%B5%81%E7%A8%8B%E5%9B%BE.4a9aczdwaio0.jpg" alt="Express-中间件的调用流程图"></p> <h4 id="_1-4-express-中间件的格式"><a href="#_1-4-express-中间件的格式" class="header-anchor">#</a> 1.4 Express 中间件的格式</h4> <p>Express 的中间件，<strong>本质</strong>上就是一个 <strong>function 处理函数</strong>，Express 中间件的格式如下：</p> <p><img src="https://jackcin877.github.io/image-hosting/Node/Express-%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E6%A0%BC%E5%BC%8F.7acz8wrtwbo0.jpg" alt="Express-中间件的格式"></p> <p>注意：中间件函数的形参列表中，<strong>必须包含 next 参数</strong>。而路由处理函数中只包含 req 和 res。</p> <h4 id="_1-5-next-函数的作用"><a href="#_1-5-next-函数的作用" class="header-anchor">#</a> 1.5 next 函数的作用</h4> <p>​		<strong>next 函数</strong>是实现<strong>多个中间件连续调用</strong>的关键，它表示把流转关系<strong>转交</strong>给下一个<strong>中间件</strong>或<strong>路由</strong>。</p> <p><img src="https://jackcin877.github.io/image-hosting/Node/%E4%B8%AD%E9%97%B4%E4%BB%B6-next()-%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%9C%E7%94%A8.6jxtelerz2o0.jpg" alt="中间件-next()-函数的作用"></p> <h3 id="_2、-express-中间件的初体验"><a href="#_2、-express-中间件的初体验" class="header-anchor">#</a> 2、 Express 中间件的初体验</h3> <h4 id="_2-1-定义中间件函数"><a href="#_2-1-定义中间件函数" class="header-anchor">#</a> 2.1 定义中间件函数</h4> <p>​		可以通过如下的方式，定义一个最简单的中间件函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 定义一个最简单的中间件函数</span>
 <span class="token keyword">const</span> <span class="token function-variable function">mw</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是最简单的中间件函数'</span><span class="token punctuation">)</span>
   <span class="token comment">// 注意：在当前中间件的业务处理完毕后，必须调用 next() 函数</span>
   <span class="token comment">//表示把流程关系转交给下一个中间件或路由</span>
   <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-2-全局生效的中间件"><a href="#_2-2-全局生效的中间件" class="header-anchor">#</a> 2.2 全局生效的中间件</h4> <p>​		客户端发起的<strong>任何请求</strong>，到达服务器之后，<strong>都会触发的中间件</strong>，叫做全局生效的中间件。 通过调用 <strong><code>app.use(中间件函数)</code></strong>，即可定义一个<strong>全局生效</strong>的中间件，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 常量 mw 所指向的，就是一个中间件函数</span>
 <span class="token keyword">const</span> <span class="token function-variable function">mw</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是最简单的中间件函数'</span><span class="token punctuation">)</span>
   <span class="token comment">// 注意：在当前中间件的业务处理完毕后，必须调用 next() 函数</span>
   <span class="token comment">//表示把流程关系转交给下一个中间件或路由</span>
   <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token comment">//全局生效的中间件</span>
 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>mw<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_2-3-定义全局中间件的简化形式"><a href="#_2-3-定义全局中间件的简化形式" class="header-anchor">#</a> 2.3 定义全局中间件的简化形式</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//全局生效的中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是一个最简单的中间件函数'</span><span class="token punctuation">)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-4-中间件的作用"><a href="#_2-4-中间件的作用" class="header-anchor">#</a> 2.4 中间件的作用</h4> <p>​		多个中间件之间，<strong>共享同一份</strong> <strong>req</strong> 和 <strong>res</strong>。基于这样的特性，我们可以在<strong>上游</strong>的中间件中，<strong>统一</strong>为 req 或 res 对象添加<strong>自定义</strong>的<strong>属性</strong>或<strong>方法</strong>，供<strong>下游</strong>的中间件或路由进行使用。</p> <p><img src="https://jackcin877.github.io/image-hosting/Node/%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8.10kdqocl1di8.jpg" alt="中间件的作用"></p> <h4 id="_2-5-定义多个全局中间件"><a href="#_2-5-定义多个全局中间件" class="header-anchor">#</a> 2.5 定义多个全局中间件</h4> <p>​		可以使用 app.use() <strong>连续定义多个</strong>全局中间件。客户端请求到达服务器之后，会按照中间件<strong>定义的先后顺序</strong>依次进行调用，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 定义第一个全局中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'调用了第1个全局中间件'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 定义第二个全局中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'调用了第2个全局中间件'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 请求这个路由，会依次触发上述两个全局中间件</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'User page.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_2-6-局部生效的中间件"><a href="#_2-6-局部生效的中间件" class="header-anchor">#</a> 2.6 局部生效的中间件</h4> <p>​		<strong>不使用 app.use() 定义</strong>的中间件，叫做<strong>局部生效的中间件</strong>，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 express 模块</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 express 的服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 1. 定义中间件函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">mw1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'调用了局部生效的中间件'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. mw1 这个中间件只能在“当前路由中生效”，这种语法就属于“局部生效的中间件”</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> mw1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Home page.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//mw1 中间件不会影响到下面这个路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'User page.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="_2-7-定义多个局部中间件"><a href="#_2-7-定义多个局部中间件" class="header-anchor">#</a> 2.7 定义多个局部中间件</h4> <p>可以在路由中，通过如下两种<strong>完全等价</strong>的方式，使用<strong>多个局部中间件</strong>：</p> <p><code>app.get('/', mw1, mw2, (req, res) =&gt; { res.send('Home page.') })</code></p> <p><code>app.get('/', [mw1, mw2], (req, res) =&gt; { res.send('Home page.') })</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 express 模块</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 express 的服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 1. 定义中间件函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">mw1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'调用了第一个局部生效的中间件'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mw2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'调用了第二个局部生效的中间件'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. 创建路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>mw1<span class="token punctuation">,</span> mw2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Home page.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'User page.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="_2-8-了解中间件的5个使用注意事项"><a href="#_2-8-了解中间件的5个使用注意事项" class="header-anchor">#</a> 2.8 了解中间件的5个使用注意事项</h4> <ul><li>① 一定要在<strong>路由之前</strong>注册中间件</li> <li>② 客户端发送过来的请求，<strong>可以连续调用多个</strong>中间件进行处理</li> <li>③ 执行完中间件的业务代码之后，<strong>不要忘记调用 next() 函数</strong></li> <li>④ 为了<strong>防止代码逻辑混乱</strong>，调用 next() 函数后不要再写额外的代码</li> <li>⑤ 连续调用多个中间件时，多个中间件之间，<strong>共享</strong> req 和 res 对象</li></ul> <h3 id="_3、-中间件的分类"><a href="#_3、-中间件的分类" class="header-anchor">#</a> 3、 中间件的分类</h3> <p>​		为了方便 <strong>理解</strong> 和<strong>记忆</strong>中间件的使用，Express 官方把<strong>常见的中间件用法</strong>，分成了 <strong>5 大类</strong>，分别是：</p> <ul><li>① <strong>应用级别</strong>的中间件</li> <li>② <strong>路由级别</strong>的中间件</li> <li>③ <strong>错误级别</strong>的中间件</li> <li>④ <strong>Express 内置</strong>的中间件</li> <li>⑤ <strong>第三方</strong>的中间件</li></ul> <h4 id="_3-1-应用级别的中间件"><a href="#_3-1-应用级别的中间件" class="header-anchor">#</a> 3.1 应用级别的中间件</h4> <p>​		通过 <code>app.use()</code>  或  <code>app.get()</code>  或  <code>app.post()</code> ，<strong>绑定到 app 实例上的中间件</strong>，叫做应用级别的中间件(局部中间件)，代码示例如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//应用级别的中间件（全局中间件）</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//应用级别的中间件（局部中间件）</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span>mw1<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Home page.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-2-路由级别的中间件"><a href="#_3-2-路由级别的中间件" class="header-anchor">#</a> 3.2 路由级别的中间件</h4> <p>​		绑定到 <strong>express.Router()</strong> 实例上的中间件，叫做路由级别的中间件。它的用法和应用级别中间件没有任何区别。只不过，<strong>应用级别中间件是绑定到 app 实例上，路由级别中间件绑定到 router 实例上</strong>，代码示例如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 2. 创建路由对象</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//创建服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//路由级别的中间件</span>
router<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Time:'</span><span class="token punctuation">,</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span>router<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_3-3-错误级别的中间件"><a href="#_3-3-错误级别的中间件" class="header-anchor">#</a> 3.3 错误级别的中间件</h4> <p>​		错误级别中间件的<strong>作用</strong>：专门用来捕获整个项目中发生的异常错误，从而防止项目异常崩溃的问题。</p> <p>​		<strong>格式</strong>：错误级别中间件的 function 处理函数中，<strong>必须有 4 个形参</strong>，形参顺序从前到后，分别是 (<strong>err</strong>, req, res, next)。</p> <p><strong>注意：错误级别的中间件， 必须注册在所有路由之后！</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 express 模块</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 express 的服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 1. 定义路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1.1 人为的制造错误</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'服务器内部发生了错误！'</span><span class="token punctuation">)</span>  <span class="token comment">//抛出一个自定义的错误</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Home page.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2. 定义错误级别的中间件，捕获整个项目的异常错误，从而防止程序的崩溃</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'发生了错误！'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">//在服务器打印错误消息</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Error：'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>  <span class="token comment">//向客户端响应错误相关的内容</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_3-4-express-内置的中间件"><a href="#_3-4-express-内置的中间件" class="header-anchor">#</a> 3.4 Express 内置的中间件</h4> <p>​		自 Express 4.16.0 版本开始，Express 内置了 <strong>3 个</strong>常用的中间件，极大的提高了 Express 项目的开发效率和体验：</p> <ul><li>① <strong>express.static</strong> 快速托管静态资源的内置中间件，例如： HTML 文件、图片、CSS 样式等（无兼容性）</li> <li>② <strong>express.json</strong> 解析 JSON 格式的请求体数据（<strong>有兼容性</strong>，仅在 4.16.0+ 版本中可用）</li> <li>③ <strong>express.urlencoded</strong> 解析 URL-encoded 格式的请求体数据（<strong>有兼容性</strong>，仅在 4.16.0+ 版本中可用）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 通过 express.json() 这个中间件，解析表单中的 JSON 格式的数据</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 通过 express.urlencoded() 这个中间件，来解析 表单中的 url-encoded 格式的数据</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 express 模块</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 express 的服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 注意：除了错误级别的中间件，其他的中间件，必须在路由之前进行配置</span>
<span class="token comment">// 通过 express.json() 这个中间件，解析表单中的 JSON 格式的数据</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 通过 express.urlencoded() 这个中间件，来解析 表单中的 url-encoded 格式的数据</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在服务器，可以使用 req.body 这个属性，来接收客户端发送过来的请求体数据</span>
  <span class="token comment">// 默认情况下，如果不配置解析表单数据的中间件，则 req.body 默认等于 undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/book'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在服务器端，可以通过 req,body 来获取 JSON 格式的表单数据和 url-encoded 格式的数据</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="_3-5-第三方的中间件"><a href="#_3-5-第三方的中间件" class="header-anchor">#</a> 3.5 第三方的中间件</h4> <p>​		非 Express 官方内置的，而是由第三方开发出来的中间件，叫做第三方中间件。在项目中，大家可以按需下载并配置第三方中间件，从而提高项目的开发效率。</p> <p>​		例如：在 express@4.16.0 之前的版本中，经常使用 body-parser 这个第三方中间件，来解析请求体数据。使用步 骤如下：</p> <p>​				① 运行 <code>npm install body-parser</code> 安装中间件</p> <p>​				② 使用 <strong>require</strong> 导入中间件</p> <p>​				③ 调用 <code>app.use()</code> 注册并使用中间件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 express 模块</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 express 的服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 1. 导入解析表单数据的中间件 body-parser</span>
<span class="token keyword">const</span> parser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
<span class="token comment">// 2. 使用 app.use() 注册中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>parser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// app.use(express.urlencoded({ extended: false }))</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果没有配置任何解析表单数据的中间件，则 req.body 默认等于 undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>注意：Express 内置的 express.urlencoded 中间件，就是基于 body-parser 这个第三方中间件进一步封装出来的。</p> <h3 id="_4、-自定义中间件"><a href="#_4、-自定义中间件" class="header-anchor">#</a> 4、 自定义中间件</h3> <h4 id="_4-1-需求描述与实现步骤"><a href="#_4-1-需求描述与实现步骤" class="header-anchor">#</a> 4.1 需求描述与实现步骤</h4> <p>​		自己<strong>手动模拟</strong>一个类似于 express.urlencoded 这样的中间件，<strong>来解析 POST 提交到服务器的表单数据。</strong></p> <ul><li>实现步骤：
<ul><li>① 定义中间件</li> <li>② 监听 req 的 data 事件</li> <li>③ 监听 req 的 end 事件</li> <li>④ 使用 querystring 模块解析请求体数据</li> <li>⑤ 将解析出来的数据对象挂载为 req.body</li> <li>⑥ 将自定义中间件封装为模块</li></ul></li></ul> <h4 id="_4-2-定义中间件"><a href="#_4-2-定义中间件" class="header-anchor">#</a> 4.2 定义中间件</h4> <p>使用 app.use() 来定义全局生效的中间件，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//中间件的业务逻辑</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_4-3-监听-req-的-data-事件"><a href="#_4-3-监听-req-的-data-事件" class="header-anchor">#</a> 4.3 监听 req 的 data 事件</h4> <p>​		在中间件中，需要监听 req 对象的 data 事件，来获取客户端发送到服务器的数据。</p> <p>​		如果数据量比较大，无法一次性发送完毕，则客户端会<strong>把数据切割后</strong>，<strong>分批发送到服务器</strong>。所以 data 事件可能会触发多次，每一次触发 data 事件时，<strong>获取到数据只是完整数据的一部分</strong>，需要手动对接收到的数据进行拼接。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 1. 定义一个 str 字符串，专门用来存储客户端发送过来的请求体数据</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token comment">// 2. 监听 req 的 data 事件(客户端发送过来的请求体数据)</span>
  req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//拼接请求体数据，隐式转换为字符串</span>
    str <span class="token operator">+=</span> chunk
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_4-4-监听-req-的-end-事件"><a href="#_4-4-监听-req-的-end-事件" class="header-anchor">#</a> 4.4 监听 req 的 end 事件</h4> <p>​		当请求体数据<strong>接收完毕</strong>之后，会自动触发 req 的 end 事件。 因此，我们可以在 req 的 end 事件中，<strong>拿到并处理完整的请求体数据</strong>。示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 3. 监听 req 的 end 事件(请求体发送完毕后自动触发)</span>
  req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">//打印完整的请求体数据</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token comment">// TODO: 把字符串格式的请求体数据，解析成对象格式</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_4-5-使用-querystring-模块解析请求体数据"><a href="#_4-5-使用-querystring-模块解析请求体数据" class="header-anchor">#</a> 4.5 使用 querystring 模块解析请求体数据</h4> <p>​		Node.js 内置了一个 <strong>querystring</strong> 模块，<strong>专门用来处理查询字符串</strong>。通过这个模块提供的 <strong>parse()</strong> 函数，可以轻松把 查询字符串，解析成对象的格式。示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 Node.js 内置的 querystring 模块</span>
<span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span>

<span class="token comment">//调用 qs.parse() 方法，把查询字符串解析为对象</span>
<span class="token keyword">const</span> body <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_4-6-将解析出来的数据对象挂载为-req-body"><a href="#_4-6-将解析出来的数据对象挂载为-req-body" class="header-anchor">#</a> 4.6 将解析出来的数据对象挂载为 req.body</h4> <p>​		<strong>上游的中间件</strong>和<strong>下游的中间件及路由</strong>之间，<strong>共享同一份 req 和 res</strong>。因此，我们可以将解析出来的数据，挂载为 req  的自定义属性，命名为 <strong>req.body</strong>，供下游使用。示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 3. 监听 req 的 end 事件(请求体发送完毕后自动触发)</span>
  req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// 调用 qs.parse() 方法，把查询字符串解析为对象</span>
    <span class="token keyword">const</span> body <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token comment">// 将解析出来的对象，挂载为 req.body 属性</span>
    req<span class="token punctuation">.</span>body <span class="token operator">=</span> body
     <span class="token comment">//最后，一点要调用 next() 函数，执行后续的业务逻辑</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_4-7-将自定义中间件封装为模块"><a href="#_4-7-将自定义中间件封装为模块" class="header-anchor">#</a> 4.7 将自定义中间件封装为模块</h4> <p>​		为了优化代码的结构，我们可以把自定义的中间件函数，封装为独立的模块，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 Node.js 内置的 querystring 模块</span>
<span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">bodyParser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义中间件具体的业务逻辑</span>
  <span class="token comment">// 1. 定义一个 str 字符串，专门用来存储客户端发送过来的请求体数据</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token comment">// 2. 监听 req 的 data 事件</span>
  req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    str <span class="token operator">+=</span> chunk
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 3. 监听 req 的 end 事件</span>
  req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在 str 中存放的是完整的请求体数据</span>
    <span class="token comment">// console.log(str)</span>
    <span class="token comment">// TODO: 把字符串格式的请求体数据，解析成对象格式</span>
    <span class="token keyword">const</span> body <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>body <span class="token operator">=</span> body
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> bodyParser

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>分割线<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token comment">// 导入 express 模块</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建 express 的服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 1. 导入自己封装的中间件模块</span>
<span class="token keyword">const</span> customBodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./14.custom-body-parser'</span><span class="token punctuation">)</span>
<span class="token comment">// 2. 将自定义的中间件函数，注册为全局可用的中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>customBodyParser<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="四、使用-express-写接口"><a href="#四、使用-express-写接口" class="header-anchor">#</a> 四、使用 Express 写接口</h2> <ul><li>body 是 post 获取提交的数据</li> <li>query 是获取 get 查询字符串</li></ul> <h3 id="_1、创建基本的服务器"><a href="#_1、创建基本的服务器" class="header-anchor">#</a> 1、创建基本的服务器</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建服务器实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 调用 app.listen 方法，指定端口号并启动web服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'express server running at http://127.0.0.1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2、-创建-api-路由模块"><a href="#_2、-创建-api-路由模块" class="header-anchor">#</a> 2、 创建 API 路由模块</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// apiRouter.js [路由模块]</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> apiRouter <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> apiRouter

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>分割线<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
    
<span class="token comment">// app.js[导入并注册路由模块]</span>
    <span class="token keyword">const</span> apiRouter <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./apiRoutere.js'</span><span class="token punctuation">)</span>
	app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span>apiRouter<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3、-编写-get-接口"><a href="#_3、-编写-get-接口" class="header-anchor">#</a> 3、 编写 GET 接口</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在这里挂载对应的路由</span>
apiRouter<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/get'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 通过 req.query 获取客户端通过查询字符串，发送到服务器的数据</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token comment">// 调用 res.send() 方法，向客户端响应处理的结果</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 0 表示处理成功，1 表示处理失败</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'GET 请求成功！'</span><span class="token punctuation">,</span> <span class="token comment">// 状态的描述</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> query<span class="token punctuation">,</span> <span class="token comment">// 需要响应给客户端的数据</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4、-编写-post-接口"><a href="#_4、-编写-post-接口" class="header-anchor">#</a> 4、 编写 POST 接口</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义 POST 接口</span>
apiRouter<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/post'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 通过 req.body 获取请求体中包含的 url-encoded 格式的数据</span>
  <span class="token keyword">const</span> body <span class="token operator">=</span> req<span class="token punctuation">.</span>body
  <span class="token comment">// 调用 res.send() 方法，向客户端响应结果</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'POST 请求成功！'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> body<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5、cors-跨域资源共享"><a href="#_5、cors-跨域资源共享" class="header-anchor">#</a> 5、CORS 跨域资源共享</h3> <h4 id="_5-1-接口的跨域问题"><a href="#_5-1-接口的跨域问题" class="header-anchor">#</a> 5.1 接口的跨域问题</h4> <ul><li>刚才编写的 GET 和 POST接口，存在一个很严重的问题：<strong>不支持跨域请求</strong>。</li> <li>解决接口跨域问题的方案主要有两种：
<ul><li>① <strong>CORS</strong>（主流的解决方案，推荐使用）</li> <li>② <strong>JSONP</strong>（有缺陷的解决方案：只支持 GET 请求）</li></ul></li></ul> <h4 id="_5-2-使用-cors中间件解决跨域问题"><a href="#_5-2-使用-cors中间件解决跨域问题" class="header-anchor">#</a> 5.2 使用 cors中间件解决跨域问题</h4> <p>cors 是 Express 的一个第三方中间件。通过安装和配置 cors 中间件，可以很方便地解决跨域问题。 使用步骤分为如下 3 步：</p> <ul><li>① 运行 <strong><code>npm install cors</code></strong> 安装中间件</li> <li>② 使用 <strong><code>const cors = require('cors')</code></strong> 导入中间件</li> <li>③ 在路由之前调用 <strong><code>app.use(cors())</code></strong> 配置中间件</li></ul> <h4 id="_5-3-什么是-cors"><a href="#_5-3-什么是-cors" class="header-anchor">#</a> 5.3 什么是 CORS</h4> <p>CORS （Cross-Origin Resource Sharing，跨域资源共享）由一系列 <strong>HTTP 响应头</strong>组成，<strong>这些 HTTP 响应头决定 浏览器是否阻止前端 JS 代码跨域获取资源</strong>。</p> <p>浏览器的<strong>同源安全策略</strong>默认会阻止网页“跨域”获取资源。但如果接口服务器 <strong>配置了 CORS 相关的 HTTP 响应头</strong>， 就可以<strong>解除浏览器端的跨域访问限制</strong>。</p> <p><img src="https://jackcin877.github.io/image-hosting/Node/CORS-%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB.1stbg1fcvsao.jpg" alt="CORS-跨域资源共享"></p> <h4 id="_5-4-cors-的注意事项"><a href="#_5-4-cors-的注意事项" class="header-anchor">#</a> 5.4 CORS 的注意事项</h4> <ul><li>① CORS 主要在<strong>服务器端</strong>进行配置。客户端浏览器<strong>无须做任何额外的配置</strong>，即可请求开启了 CORS 的接口。</li> <li>② CORS 在浏览器中<strong>有兼容性</strong>。只有支持 XMLHttpRequest Level2 的浏览器，才能正常访问开启了 CORS 的服 务端接口（例如：IE10+、Chrome4+、FireFox3.5+）。</li></ul> <h4 id="_5-5-cors-响应头部-access-control-allow-origin"><a href="#_5-5-cors-响应头部-access-control-allow-origin" class="header-anchor">#</a> 5.5  CORS 响应头部 - Access-Control-Allow-Origin</h4> <ul><li><p>响应头部中可以携带一个 <strong>Access-Control-Allow-Origin</strong> 字段，其语法如下：</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Origin<span class="token operator">:</span> <span class="token operator">&lt;</span>origin<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>例如，下面的字段值将只允许来自 http://itcast.cn 的请求:</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span><span class="token string">'http://itcast.cn'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>如果指定了 Access-Control-Allow-Origin 字段的值为<strong>通配符</strong> <strong><code>*</code></strong>，表示允许来自任何域的请求，示例代码如下：</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h4 id="_5-6-cors-响应头部-access-control-allow-headers"><a href="#_5-6-cors-响应头部-access-control-allow-headers" class="header-anchor">#</a> 5.6 CORS 响应头部 - Access-Control-Allow-Headers</h4> <ul><li>默认情况下，CORS <strong>仅</strong>支持<strong>客户端向服务器</strong>发送如下的 9 个<strong>请求头</strong>：</li> <li>Accept、Accept-Language、Content-Language、DPR、Downlink、Save-Data、Viewport-Width、Width 、 Content-Type （值仅限于 text/plain、multipart/form-data、application/x-www-form-urlencoded 三者之一）</li> <li>如果客户端向服务器<strong>发送了额外的请求头信息</strong>，则需要<strong>在服务器端</strong>，通过 Access-Control-Allow-Headers <strong>对额外的请求头进行声明</strong>，否则这次请求会失败！</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 允许客户端额外向服务器发送  Content-Type 请求头和 X-Custom-Header 请求头</span>
<span class="token comment">// 注意：多个请求头之间使用英文的逗号进行分割</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type,X-Custom-Header'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_5-7-cors-响应头部-access-control-allow-methods"><a href="#_5-7-cors-响应头部-access-control-allow-methods" class="header-anchor">#</a> 5.7 CORS 响应头部  - Access-Control-Allow-Methods</h4> <ul><li><p>默认情况下，CORS 仅支持客户端发起 GET、POST、HEAD 请求。</p></li> <li><p>如果客户端希望通过 <strong>PUT、DELETE</strong> 等方式请求服务器的资源，则需要在服务器端，通过 Access-Control-Alow-Methods来<strong>指明实际请求所允许使用的 HTTP 方法</strong>。</p></li> <li><p>示例代码如下：</p> <ul><li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 只允许 POST、GET、DELETE、HEAD 请求方法</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'GET,POST,DELETE,HEAD'</span><span class="token punctuation">)</span>
<span class="token comment">// 允许所有的 HTTP 请求方法</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li></ul> <h4 id="_5-8-cors请求的分类"><a href="#_5-8-cors请求的分类" class="header-anchor">#</a> 5.8 CORS请求的分类</h4> <ul><li>客户端在请求 CORS 接口时，根据<strong>请求方式</strong>和<strong>请求头</strong>的不同，可以将 CORS 的请求分为<strong>两大类</strong>，分别是：
<ul><li>①简单请求</li> <li>②预检请求</li></ul></li></ul> <h4 id="_5-9-简单请求"><a href="#_5-9-简单请求" class="header-anchor">#</a> 5.9 简单请求</h4> <ul><li>同时满足以下两大条件的请求，就属于简单请求：
<ul><li>① <strong>请求方式</strong>：GET、POST、HEAD 三者之一</li> <li>② <strong>HTTP 头部信息</strong>不超过以下几种字段：<strong>无自定义头部字段</strong>、Accept、Accept-Language、Content-Language、DPR、Downlink、Save-Data、Viewport-Width、Width 、Content-Type（只有三个值application/x-www-form-urlencoded、multipart/form-data、text/plain）</li></ul></li></ul> <h4 id="_5-10-预检请求"><a href="#_5-10-预检请求" class="header-anchor">#</a> 5.10 预检请求</h4> <ul><li>只要符合以下任何一个条件的请求，都需要进行预检请求：
<ul><li>① 请求方式为 <strong>GET、POST、HEAD 之外的请求 Method 类型</strong></li> <li>② 请求头中 <strong>包含自定义头部字段</strong></li> <li>③ 向服务器 <strong>发送了 application/json 格式的数据</strong></li></ul></li></ul> <p>在浏览器与服务器正式通信之前，浏览器<strong>会先发送 OPTION 请求进行预检，以获知服务器是否允许该实际请求</strong>，所以这一次的 OPTION 请求称为“预检请求”。<strong>服务器成功响应预检请求后，才会发送真正的请求，并且携带真实数据</strong>。</p> <h4 id="_5-11-简单请求和预检请求的区别"><a href="#_5-11-简单请求和预检请求的区别" class="header-anchor">#</a> 5.11 简单请求和预检请求的区别</h4> <p><strong>简单请求的特点</strong>：客户端与服务器之间 <em>只会发生一次请求</em>。</p> <p><strong>预检请求的特点</strong>：客户端与服务器之间会发生两次请求，<em>OPTION 预检请求成功之后，才会发起真正的请求</em>。</p> <h3 id="_6、jsonp-接口"><a href="#_6、jsonp-接口" class="header-anchor">#</a> 6、JSONP 接口</h3> <h4 id="_6-1-回顾-jsonp-的概念与特点"><a href="#_6-1-回顾-jsonp-的概念与特点" class="header-anchor">#</a> 6.1 回顾 JSONP 的概念与特点</h4> <ul><li><strong>概念</strong>：浏览器端通过 &lt;script&gt; 标签的 src 属性，请求服务器上的数据，同时，服务器返回一个函数的调用。这种请求数据的方式叫做 JSONP。</li> <li><strong>特点</strong>：
<ul><li>①JSONP 不属于真正的 Ajax 请求，因为它没有使用 XMLHttpRequest 这个对象。</li> <li>②JSONP 仅支持 GET 请求，不支持 POST、PUT、DELETE 等请求。</li></ul></li></ul> <h4 id="_6-2-创建-jsonp-接口的注意事项"><a href="#_6-2-创建-jsonp-接口的注意事项" class="header-anchor">#</a> 6.2 创建 JSONP 接口的注意事项</h4> <p>如果项目中已经配置了 CORS 跨域资源共享，为了<strong>防止冲突</strong>，必须在配置 CORS 中间件<strong>之前声明</strong> JSONP 的接口。否则 JSONP 接口会被处理成开启了 CORS 的接口。示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//优先创建 JSONP 接口【这个接口不会被处理成 CORS 接口】</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/jsonp'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//再配置 CORS 中间件【后续的所有接口，都会处理为 CORS 直接】</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//这是一个开启了 CORS 的接口</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/get'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_6-3-实现-jsonp-接口的步骤"><a href="#_6-3-实现-jsonp-接口的步骤" class="header-anchor">#</a> 6.3 <strong>实现</strong> <strong>JSONP</strong> 接口的步骤</h4> <ul><li>①获取客户端发送过来的回调函数的名字</li> <li>②得到要通过 JSONP 形式发送给客户端的数据</li> <li>③根据前两步得到的数据，拼接出一个函数调用的字符串</li> <li>④把上一步拼接得到的字符串，响应给客户端的 &lt;script&gt; 标签进行解析执行</li></ul> <h4 id="_6-4-实现-jsonp-接口的具体代码"><a href="#_6-4-实现-jsonp-接口的具体代码" class="header-anchor">#</a> 6.4 实现 JSONP 接口的具体代码</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 必须在配置 cors 中间件之前，配置 JSONP 的接口</span>
<span class="token comment">// JSONP 的接口并没有统一放到 router里注册，所以必须手动在路径上加上 /api</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/jsonp'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// TODO: 定义 JSONP 接口具体的实现过程</span>
  <span class="token comment">// 1. 得到函数的名称</span>
  <span class="token keyword">const</span> funcName <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback
  <span class="token comment">// 2. 定义要发送到客户端的数据对象</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
  <span class="token comment">// 3. 拼接出一个函数的调用</span>
  <span class="token comment">//es6的模板字符串 ${JSON.stringify(data)}就相当于一个传入的参数</span>
  <span class="token keyword">const</span> scriptStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>funcName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
  <span class="token comment">// 4. 把拼接的字符串，响应给客户端</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>scriptStr<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_6-5-再网页中使用-jquery-发起-jsonp请求"><a href="#_6-5-再网页中使用-jquery-发起-jsonp请求" class="header-anchor">#</a> 6.5 再网页中使用 jQuery 发起 JSONP请求</h4> <p>调用 $.ajax() 函数，提供 JSONP 的配置选项，从而发起 JSONP 请求，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btnJSONP'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://127.0.0.1/api/jsonp'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span>
          <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/JackCin877/vuepress-theme-vdoing/edit/master/docs/02.进阶/25.Node/10. Express.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/11/12, 14:39:45</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/vuepress-theme-vdoing/pages/5f6e79/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">模块化</div></a> <a href="/vuepress-theme-vdoing/pages/fee75e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">服务器的级别概念与初始Ajax</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vuepress-theme-vdoing/pages/5f6e79/" class="prev">模块化</a></span> <span class="next"><a href="/vuepress-theme-vdoing/pages/fee75e/">服务器的级别概念与初始Ajax</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/vuepress-theme-vdoing/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/vuepress-theme-vdoing/pages/188689/"><div>
            51单片机及补充知识
            <!----></div></a> <span class="date">09-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/vuepress-theme-vdoing/pages/b10f7a/"><div>
            独立按键
            <!----></div></a> <span class="date">09-13</span></dt></dl><dl><dd>03</dd> <dt><a href="/vuepress-theme-vdoing/pages/b4d59b/"><div>
            LCD1602液晶显示器
            <!----></div></a> <span class="date">09-13</span></dt></dl> <dl><dd></dd> <dt><a href="/vuepress-theme-vdoing/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:2269233033@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/JackCin877" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/vuepress-theme-vdoing/assets/js/app.ef19247d.js" defer></script><script src="/vuepress-theme-vdoing/assets/js/2.59d30681.js" defer></script><script src="/vuepress-theme-vdoing/assets/js/51.54e3e0f5.js" defer></script>
  </body>
</html>
