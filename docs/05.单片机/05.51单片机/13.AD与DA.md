---
title: ADä¸DA
date: 2023-09-13 09:58:49
permalink: /pages/8452b6/
categories:
  - å•ç‰‡æœº
  - 51å•ç‰‡æœº
tags:
  - 
author: 
  name: JackCin
  link: https://github.com/JackCin877
---
# AD/DAè½¬æ¢

> å­¦ä¹ ç›®æ ‡ï¼š
>
> * **AD/DAè½¬æ¢ï¼Œä¹Ÿå°±æ˜¯æ•°å­—ä¿¡å·ä¸æ¨¡æ‹Ÿä¿¡å·ä¹‹é—´çš„è½¬æ¢**ã€‚æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·æˆ‘ä»¬ä½¿ç”¨**å¯è°ƒç”µé˜»**ã€**å…‰æ•ç”µé˜»**å’Œ**çƒ­æ•ç”µé˜»**æ¥å®ç°ï¼Œåœ¨å…‰æ•ç”µé˜»å°äº100æ—¶ï¼ˆè¾ƒæš—ï¼‰ï¼ŒD1ç¯ä¼šè‡ªåŠ¨äº®ï¼›è€Œæ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·æˆ‘ä»¬ä½¿ç”¨å®ç°DAå‘¼å¸ç¯æ¥å±•ç¤ºã€‚
>

## ä¸€ã€AD/DAä»‹ç»

* **AD**ï¼ˆAnalog to Digitalï¼‰ï¼š**æ¨¡æ‹Ÿ-æ•°å­—è½¬æ¢**ï¼Œå°†æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºè®¡ç®—æœºå¯æ“ä½œçš„æ•°å­—ä¿¡å·ã€‚
* **DA**ï¼ˆDigital to Analogï¼‰ï¼š**æ•°å­—-æ¨¡æ‹Ÿè½¬æ¢**ï¼Œå°†è®¡ç®—æœºè¾“å‡ºçš„æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ã€‚
* AD/DAè½¬æ¢æ‰“å¼€äº†è®¡ç®—æœºä¸æ¨¡æ‹Ÿä¿¡å·çš„å¤§é—¨ï¼Œæå¤§çš„æé«˜äº†è®¡ç®—æœºç³»ç»Ÿçš„åº”ç”¨èŒƒå›´ï¼Œä¹Ÿä¸ºæ¨¡æ‹Ÿä¿¡å·æ•°å­—åŒ–å¤„ç†æä¾›äº†å¯èƒ½ã€‚
  

![img](https://img-blog.csdnimg.cn/d94edb6acff3489e9e2c66a2411e431d.png)

## äºŒã€ç¡¬ä»¶ç”µè·¯æ¨¡å‹

* ADï¼šå°±æ˜¯å°†ç”µå‹é‡è½¬æ¢ä¸ºæ•°å­—é‡ã€‚

* DAï¼šå…¶å®æœ‰ç‚¹ç±»ä¼¼äºPWMï¼Œæœ€åç»è¿‡ä¸€ä¸ªä½é€šæ»¤æ³¢å™¨ï¼Œå°±èƒ½å®ç°æ•ˆæœäº†ã€‚

![img](https://img-blog.csdnimg.cn/9fe1abf351104170a81017f2cf88d73d.png)

* ADè½¬æ¢é€šå¸¸æœ‰å¤šä¸ªè¾“å…¥é€šé“ï¼Œç”¨å¤šè·¯é€‰æ‹©å¼€å…³è¿æ¥è‡³ADè½¬æ¢å™¨ï¼Œä»¥å®ç°ADå¤šè·¯å¤ç”¨çš„ç›®çš„ï¼Œæé«˜ç¡¬ä»¶åˆ©ç”¨ç‡
* AD/DAä¸å•ç‰‡æœºæ•°æ®ä¼ é€å¯ä½¿ç”¨å¹¶å£ï¼ˆé€Ÿåº¦å¿«ã€åŸç†ç®€å•ï¼‰ï¼Œä¹Ÿå¯ä½¿ç”¨ä¸²å£ï¼ˆæ¥çº¿å°‘ã€ä½¿ç”¨æ–¹ä¾¿ï¼‰
* å¯å°†AD/DAæ¨¡å—ç›´æ¥é›†æˆåœ¨å•ç‰‡æœºå†…ï¼Œè¿™æ ·ç›´æ¥å†™å…¥/è¯»å‡ºå¯„å­˜å™¨å°±å¯è¿›è¡ŒAD/DAè½¬æ¢ï¼Œå•ç‰‡æœºçš„IOå£å¯ç›´æ¥å¤ç”¨ä¸ºAD/DAçš„é€šé“
  



### 1ã€AD

> è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ADèŠ¯ç‰‡ï¼ˆADC0809ï¼‰ï¼Œé¦–å…ˆé€‰æ‹©æ¨¡æ‹Ÿå¼€å…³ï¼Œä¹‹åè¿›è¡ŒADè½¬æ¢ï¼Œå†é€šè¿‡ç¼“å­˜å™¨è¾“å‡ºï¼Œå°±å¯ä»¥äº†ã€‚

![img](https://img-blog.csdnimg.cn/82586209f38e43b49f1d7fbca6d399d5.png)

![ADCæ¨¡å—](https://cdn.staticaly.com/gh/JackCin877/image-hosting@master/51MUC/ADCæ¨¡å—.6hqjxeq7xvg0.webp)

### 2ã€DA

> è¿™æ˜¯ä¸€ä¸ªç®€å•çš„DAèŠ¯ç‰‡ï¼ˆADC0832ï¼‰ï¼Œé¦–å…ˆè¾“å…¥æ•°æ®ï¼Œé€šè¿‡æ§åˆ¶ç”µè·¯æ§åˆ¶å¯„å­˜å™¨ï¼Œæœ€åé€šè¿‡ä¸€ä¸ªDAè½¬æ¢å™¨è¾“å‡ºå°±æˆäº†ã€‚

![img](https://img-blog.csdnimg.cn/ee8cf15b03464badb8b6051a7db1a623.png)

![DACæ¨¡å—](https://cdn.staticaly.com/gh/JackCin877/image-hosting@master/51MUC/DACæ¨¡å—.66saxknu4kg0.webp)

## ä¸‰ã€è¿ç®—æ”¾å¤§å™¨

> * **è¿ç®—æ”¾å¤§å™¨**ï¼ˆç®€ç§°â€œè¿æ”¾â€ï¼‰æ˜¯å…·æœ‰å¾ˆé«˜æ”¾å¤§å€æ•°çš„æ”¾å¤§ç”µè·¯å•å…ƒã€‚å†…éƒ¨é›†æˆäº†å·®åˆ†æ”¾å¤§å™¨ã€ç”µå‹æ”¾å¤§å™¨ã€åŠŸç‡æ”¾å¤§å™¨ä¸‰çº§æ”¾å¤§ç”µè·¯ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½å®Œå¤‡ã€åŠŸèƒ½å¼ºå¤§çš„é€šç”¨æ”¾å¤§ç”µè·¯å•å…ƒï¼Œç”±äºå…¶åº”ç”¨ååˆ†å¹¿æ³›ï¼Œç°å·²ä½œä¸ºåŸºæœ¬çš„ç”µè·¯å…ƒä»¶å‡ºç°åœ¨ç”µè·¯å›¾ä¸­
> * è¿ç®—æ”¾å¤§å™¨å¯æ„æˆçš„ç”µè·¯æœ‰ï¼šç”µå‹æ¯”è¾ƒå™¨ã€åç›¸æ”¾å¤§å™¨ã€åŒç›¸æ”¾å¤§å™¨ã€ç”µå‹è·Ÿéšå™¨ã€åŠ æ³•å™¨ã€ç§¯åˆ†å™¨ã€å¾®åˆ†å™¨ç­‰
> * è¿ç®—æ”¾å¤§å™¨ç”µè·¯çš„åˆ†ææ–¹æ³•ï¼š**è™šçŸ­**ã€**è™šæ–­**ï¼ˆè´Ÿåé¦ˆæ¡ä»¶ä¸‹ï¼‰

![img](https://img-blog.csdnimg.cn/315d9233c6da49ca87ee548d0bbd43ae.png)

* **è¿ç®—æ”¾å¤§å™¨çš„è¾“å…¥ç«¯è¾“å…¥é˜»æŠ—éå¸¸å¤§ï¼Œå³åŒç›¸å’Œæ–¹å‘è¾“å…¥ç«¯ç”µæµéƒ½å‡ ä¹ä¸º0ï¼ˆè™šæ–­ï¼‰**

## å››ã€è¿æ”¾ç”µè·¯

### [è¿æ”¾ç”µè·¯](https://so.csdn.net/so/search?q=è¿æ”¾ç”µè·¯&spm=1001.2101.3001.7020)

### 1ã€ç”µå‹æ¯”è¾ƒå™¨

[ç”µå‹æ¯”è¾ƒå™¨](https://so.csdn.net/so/search?q=ç”µå‹æ¯”è¾ƒå™¨&spm=1001.2101.3001.7020)

> è¿™æ˜¯ç”µå‹æ¯”è¾ƒå™¨çš„ä½œç”¨ï¼Œå½“+å¤§äº-çš„æ—¶å€™ï¼Œè¾“å‡ºVCCï¼Œå½“-å¤§äº+çš„æ—¶å€™ï¼Œè¾“å‡ºGDNã€‚
>
> ![img](https://img-blog.csdnimg.cn/f7f8c7a3dfb14cbe86a24f1d37bc8975.png)

![img](https://img-blog.csdnimg.cn/a746e3366e684b569f476892916f1060.png)

### 2ã€åå‘æ”¾å¤§å™¨

> é€šè¿‡åˆ†æè™šçŸ­å’Œè™šæ®µå¯ä»¥å¾—åˆ°è¿™ä¸ªç»“è®ºã€‚
>
>  ![img](https://img-blog.csdnimg.cn/ea74e7d5309449d1ab3b74771d37555d.png)

![img](https://img-blog.csdnimg.cn/dadbbd3371df4da38656f8079926944d.png)

* æ¥R2çš„é‚£æ¡çº¿è·¯ï¼Œå½¢æˆäº†ä¸€ä¸ª**è´Ÿåé¦ˆ**ï¼Œå¦‚å›¾ï¼Œå¦‚æœINè¾“å…¥äº†0.1V,å› ä¸º+ææ¥çš„æ˜¯GNDï¼Œæ‰€ä»¥-æç”µå‹å¤§äº+æï¼ŒOUTè¾“å‡ºè´Ÿçš„æœ€å¤§ï¼ˆç”µå‹æ¯”è¾ƒå™¨ï¼‰ï¼Œä½†å› ä¸ºè´Ÿåé¦ˆçš„å­˜åœ¨ï¼Œè¿™ä¸ªè¾“å‡ºçš„è´Ÿçš„æœ€å¤§åˆä¼šåè¿‡æ¥æŠŠç”µå‹ï¼ˆ0.1Vï¼‰æ‹‰ä½ï¼Œè¿™æ—¶+æç”µå‹åˆä¼šæ¯”-æå¤§ï¼ŒOUTè¾“å‡ºæ­£çš„æœ€å¤§ï¼Œç„¶ååˆæ˜¯è´Ÿåé¦ˆæ‹‰é«˜è¾“å…¥çš„ç”µå‹ï¼Œå°±è¿™æ ·ä¸æ–­ä½¿è¾“å‡ºèµ·åˆ°ä¸è¾“å…¥ç›¸åçš„ä½œç”¨ï¼Œ**ä½¿ç³»ç»Ÿè¾“å‡ºä¸ç³»ç»Ÿç›®æ ‡çš„è¯¯å·®å‡å°ï¼Œç³»ç»Ÿè¶‹äºç¨³å®šï¼Œæœ€åä½¿ç”µè·¯è¾¾åˆ°ä¸€ä¸ªç¨³æ€**ï¼Œï¼ˆ-/+éƒ½ä¸º0Vï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬çš„ç”µè·¯å°±å½¢æˆäº†**è™šçŸ­**çš„çŠ¶æ€ã€‚
* åœ¨ç”µå‹æ¯”è¾ƒå™¨çš„ä¸¤ä¸ªè¾“å‡ºç«¯ï¼Œå› ä¸ºè¿ç®—æ¯”è¾ƒå™¨çš„è¾“å…¥é˜»æŠ—éå¸¸å¤§ï¼Œå³åŒç›¸å’Œåå‘è¾“å…¥ç«¯å‡ ä¹éƒ½æ²¡æœ‰ç”µæµçš„è¾“å…¥å’Œè¾“å‡ºï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬å°±å«åš**è™šæ–­**

* å…¬å¼çš„è®¡ç®—è¿‡ç¨‹ï¼š
  * å› ä¸ºè™šæ–­å’Œè™šçŸ­ï¼Œæ‰€ä»¥ç”µæµçš„æ–¹å‘å°±åº”è¯¥æ˜¯ä»IN->R1->R2->OUT
    * æ‰€ä»¥ï¼Œç»è¿‡R1å’ŒR2çš„ç”µæµ I å°±æ˜¯INçš„ç”µå‹ï¼ˆä¹‹åæˆ‘ä»¬ç®€ç§°VInï¼‰ï¼Œé™¤ä»¥R1çš„ç”µé˜»ï¼Œè¿™æ ·å°±å¯å¾—R2çš„ç”µå‹ä¸ºI*R2
    * ç„¶åå› ä¸ºç”µæµæµå‘æ˜¯ä»å·¦åˆ°å³ï¼Œæ‰€ä»¥OUTçš„ç”µå‹å°±æ˜¯R2å·¦è¾¹çš„ç”µå‹å‡å»R2çš„ç”µå‹
    * åˆå› ä¸º**è™šçŸ­**ï¼Œå¯çŸ¥R2å·¦è¾¹çš„ç”µå‹ä¸º0Vï¼Œæ‰€ä»¥å…¬å¼ä¸º**0-VIn/R1*R2**

### 3ã€åŒç›¸æ”¾å¤§å™¨

![img](https://img-blog.csdnimg.cn/1cf2fcf1885a4b07a2ad0d72114510e5.png)

![img](https://img-blog.csdnimg.cn/9a4b9c313063409c8cb8a04abc1299bb.png)

* 



### 4ã€ç”µå‹è·Ÿéšå™¨

![img](https://img-blog.csdnimg.cn/65ec447ad76d4d87a7f658c57dfb63c4.png)

![img](https://img-blog.csdnimg.cn/93585c16f015482cb2618cf816c8ec20.png)

## äº”ã€DAåŸç†

### 1ã€Tå‹ç”µé˜»ç½‘ç»œDAè½¬æ¢å™¨

![img](https://img-blog.csdnimg.cn/50bb617278d94ea383207d28ee8471bb.png)

![img](https://img-blog.csdnimg.cn/4406814aa8a949d6b2583bfdee7fae73.png)

### 2ã€PWMå‹DAè½¬æ¢å™¨

> â€‹    è¿™ä¸ªçš„ä½œç”¨å°±æ˜¯å°†äº¤æµæ»¤æ‰ï¼Œå˜æˆç›´æµç”µå‹ã€‚

![img](https://img-blog.csdnimg.cn/c03a693fc16745f4ab27d07274cc4ca9.png)

![img](https://img-blog.csdnimg.cn/5cb4d1dae12a4f678ac42bef3351572c.png)





## å…­ã€ADåŸç†

### 1ã€é€æ¬¡é€¼è¿‘å‹ADè½¬æ¢å™¨

>  é€æ¬¡é€¼è¿‘å‹ADè½¬æ¢å™¨çš„åŸç†å°±æ˜¯é€šè¿‡DACä¸æ–­å˜æ¢å»å’Œè¾“å…¥çš„ç”µå‹è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç”µå‹ï¼Œè¾“å‡ºå¯¹åº”æ•°å­—é‡å°±è¡Œã€‚

![img](https://img-blog.csdnimg.cn/7728fd41dc204449b89cebd5233ed2a1.png)

### 2ã€AD/DAæ€§èƒ½æŒ‡æ ‡

* åˆ†è¾¨ç‡ï¼šæŒ‡AD/DAæ•°å­—é‡çš„ç²¾ç»†ç¨‹åº¦ï¼Œé€šå¸¸ç”¨ä½æ•°è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå¯¹äº5Vç”µæºç³»ç»Ÿæ¥è¯´ï¼Œ8ä½çš„ADå¯å°†5Vç­‰åˆ†ä¸º256ä»½ï¼Œå³æ•°å­—é‡å˜åŒ–æœ€å°ä¸€ä¸ªå•ä½æ—¶ï¼Œæ¨¡æ‹Ÿé‡å˜åŒ–5V/256=0.01953125Vï¼Œæ‰€ä»¥ï¼Œ8ä½ADçš„ç”µå‹åˆ†è¾¨ç‡ä¸º0.01953125Vï¼ŒAD/DAçš„ä½æ•°è¶Šé«˜ï¼Œåˆ†è¾¨ç‡å°±è¶Šé«˜
* è½¬æ¢é€Ÿåº¦ï¼šè¡¨ç¤ºAD/DAçš„æœ€å¤§é‡‡æ ·/å»ºç«‹é¢‘ç‡ï¼Œé€šå¸¸ç”¨è½¬æ¢é¢‘ç‡æˆ–è€…è½¬æ¢æ—¶é—´æ¥è¡¨ç¤ºï¼Œå¯¹äºé‡‡æ ·/è¾“å‡ºé«˜é€Ÿä¿¡å·ï¼Œåº”æ³¨æ„AD/DAçš„è½¬æ¢é€Ÿåº¦
  

## ä¸ƒã€XPT2046

### 1ã€åŠŸèƒ½è¯´æ˜

![img](https://img-blog.csdnimg.cn/5c620e6b926547029f46917edbca1c4c.png)

### 2ã€æ—¶åº

> â€‹	CSä½œä¸ºç‰‡é€‰ï¼Œç”¨æ¥é€‰æ‹©ä¸åŒçš„è®¾å¤‡ï¼Œç„¶åæ˜¯DCLKä¸Šå‡æ²¿ä¸ºå‘é€ï¼Œä¸‹é™æ²¿ä¸ºè¯»å‡ºï¼ŒDOUTæ˜¯è¯»å‡ºçš„å€¼ã€‚

![img](https://img-blog.csdnimg.cn/13ba7e70ed344c2fa81d7c105aea6792.png)

```c
----XPT2046.c

#include <REGX52.H>
#include <INTRINS.H>

//å¼•è„šå®šä¹‰
sbit XPY2046_DIN=P3^4;
sbit XPY2046_CS=P3^5;
sbit XPY2046_DCLK=P3^6;
sbit XPY2046_DOUT=P3^7;

/**
  * @brief  ZPT2046è¯»å–ADå€¼
  * @param  Command å‘½ä»¤å­—ï¼ŒèŒƒå›´ï¼šå¤´æ–‡ä»¶å†…å®šä¹‰çš„å®ï¼Œç»“å°¾çš„æ•°å­—è¡¨ç¤ºè½¬æ¢çš„ä½æ•°
  * @retval ADè½¬æ¢åçš„æ•°å­—é‡ï¼ŒèŒƒå›´ï¼š8ä½ä¸º0~255ï¼Œ12ä½ä¸º0~4095
  */
unsigned int XPT2046_ReadAD(unsigned char Command)
{
	unsigned char i;
	unsigned int Data=0;
	XPY2046_DCLK=0;//åˆå§‹åŒ–
	XPY2046_CS=0;
	for(i=0;i<8;i++)
	{
		XPY2046_DIN=Command&(0x80>>i);
		XPY2046_DCLK=1;
		//è¿™é‡Œå¯ä»¥ä¸åŠ å»¶æ—¶ï¼Œå› ä¸ºæ—¶é—´è¶³å¤Ÿ
		XPY2046_DCLK=0;
	}
	
	for(i=0;i<16;i++)
	{
		XPY2046_DCLK=1;
		XPY2046_DCLK=0;
		if(XPY2046_DOUT) 
		{
			Data|=(0x8000>>i);//16ä½
		}
	}
	
	XPY2046_CS=1;
	if(Command & 0x08){  //åˆ¤æ–­é€‰æ‹©çš„æ˜¯å‡ ä½çš„ï¼Œå¦‚æœæ˜¯8ä½ï¼Œé‚£åé¢æ˜¯è¡¥å……äº†8ä¸ª0ï¼Œæ‰€ä»¥è¦å³ç§»8ä½
	return Data>>8;
	}
	else   //å¦‚æœæ˜¯12ä½çš„ï¼Œå°±æ˜¯è¡¥å……äº†4ä¸ª0ï¼Œæ‰€ä»¥è¦å³ç§»4ä½
	return Data>>4;
}
```

## å…«ã€ADæ•°æ¨¡è½¬æ¢ä»£ç 

```c
------XPT2046.h

#ifndef __XPT2046_H__
#define __XPT2046_H__

#define XPT2046_VBAT	0xAC    //å¯¹åº”å…‰æ•ç”µé˜»
#define XPT2046_AUX		0xEC
#define XPT2046_XP		0x9C	//ä¹Ÿå¯ä»¥æ˜¯0xBCï¼ŒX+çš„æ„æ€ï¼Œå¯¹åº”å¯è°ƒç”µé˜»
#define XPT2046_YP		0xDC	//Y+çš„æ„æ€ï¼Œå¯¹åº”çƒ­æ•ç”µé˜»

unsigned int XPT2046_ReadAD(unsigned char Command);

#endif
```

![ADæ•°æ¨¡è£…æ¢](https://cdn.staticaly.com/gh/JackCin877/image-hosting@master/51MUC/ADæ•°æ¨¡è£…æ¢.5cii5alf4m00.webp)

![ADæ•°æ¨¡è½¬æ¢2](https://cdn.staticaly.com/gh/JackCin877/image-hosting@master/51MUC/ADæ•°æ¨¡è½¬æ¢2.557wf5qi5700.webp)

![ADæ•°æ¨¡è½¬æ¢3](https://cdn.staticaly.com/gh/JackCin877/image-hosting@master/51MUC/ADæ•°æ¨¡è½¬æ¢3.49txe9jlkrc0.webp)

* **S**å¿…é€‰**1**ï¼›
* **A0,A1,A2**çœ‹ä¸‹è¡¨
  * ![ADæ•°æ¨¡è½¬æ¢4](https://cdn.staticaly.com/gh/JackCin877/image-hosting@master/51MUC/ADæ•°æ¨¡è½¬æ¢4.5r983oregy80.webp)

* **MODE**çœ‹é€‰æ‹©ï¼Œä¸Šé¢ä»£ç ç»™å‡ºçš„æ˜¯8ä½æ¨¡å¼ï¼Œå³MODE=1ï¼›
* **SER/â€”DFR**ï¼Œæˆ‘ä»¬é€‰**å•ç«¯æ¨¡å¼(1)**ï¼Œåœ¨éœ€è¦è§¦æ‘¸å‹åŠ›æµ‹è¯•é‡Œå°±é€‰å·®åˆ†æ¨¡å¼ï¼ˆ0ï¼‰;
* **PD1æ§åˆ¶å†…éƒ¨å‚è€ƒç”µå‹**(2.5V)çš„å¼€å…³,æˆ‘ä»¬è¿™é‡Œä¸ä½¿ç”¨å†…éƒ¨å‚è€ƒç”µå‹ï¼Œæ‰€ä»¥é€‰äº†0ï¼›
* **PD0**ï¼Œè€å¸ˆè¯´å½±å“ä¸å¤§ï¼Œ1/0éƒ½è¡Œï¼Œé€‰äº†0ğŸ˜¥ï¼›

```c
#ifndef __XPT2046_H__
#define __XPT2046_H__

#define XPT2046_VBAT	0xAC    //å¯¹åº”å…‰æ•ç”µé˜»
#define XPT2046_AUX		0xEC
#define XPT2046_XP		0x9C	//ä¹Ÿå¯ä»¥æ˜¯0xBCï¼ŒX+çš„æ„æ€ï¼Œå¯¹åº”å¯è°ƒç”µé˜»
#define XPT2046_YP		0xDC	//Y+çš„æ„æ€ï¼Œå¯¹åº”çƒ­æ•ç”µé˜»

unsigned int XPT2046_ReadAD(unsigned char Command);

#endif
```



* main.c

```c
#include <REGX52.H>
#include "Delay.h"
#include "LCD1602.h"
#include "XPT2046.h"


unsigned int ADValue;


void main(void)
{
	LCD_Init();
	LCD_ShowString(1,1,"ADJ  NTC  GR");
	while(1)
	{
		ADValue=XPT2046_ReadAD(XPT2046_XP);		//è¯»å–AIN0ï¼Œå¯è°ƒç”µé˜»
		LCD_ShowNum(2,1,ADValue,3);				//æ˜¾ç¤ºAIN0
		ADValue=XPT2046_ReadAD(XPT2046_YP);		//è¯»å–AIN1ï¼Œçƒ­æ•ç”µé˜»
		LCD_ShowNum(2,6,ADValue,3);				//æ˜¾ç¤ºAIN1
		ADValue=XPT2046_ReadAD(XPT2046_VBAT);	//è¯»å–AIN2ï¼Œå…‰æ•ç”µé˜»
		LCD_ShowNum(2,11,ADValue,3);			//æ˜¾ç¤ºAIN2
		Delay(100);
	}
}
```



## ä¹ã€DAæ•°æ¨¡è½¬æ¢

* è¿™ä¸ªä¸æ˜¯ç‰¹åˆ«ç†è§£å’ŒDAçš„å…³ç³»ğŸ˜£

```c
#include <REGX52.H>
#include "Delay.h"
#include "Timer0.h"

sbit DA=P2^1;

unsigned char Counter,Compare;	//è®¡æ•°å€¼å’Œæ¯”è¾ƒå€¼ï¼Œç”¨äºè¾“å‡ºPWM
unsigned char i;

void main()
{
	Timer0_Init();
	while(1)
	{
		for(i=0;i<100;i++)
		{
			Compare=i;			//è®¾ç½®æ¯”è¾ƒå€¼ï¼Œæ”¹å˜PWMå ç©ºæ¯”
			Delay(10);
		}
		for(i=100;i>0;i--)
		{
			Compare=i;			//è®¾ç½®æ¯”è¾ƒå€¼ï¼Œæ”¹å˜PWMå ç©ºæ¯”
			Delay(10);
		}
	}
}

void Timer0_Routine() interrupt 1
{
	TL0 = 0x9C;		//è®¾ç½®å®šæ—¶åˆå€¼
	TH0 = 0xFF;		//è®¾ç½®å®šæ—¶åˆå€¼
	Counter++;
	Counter%=100;	//è®¡æ•°å€¼å˜åŒ–èŒƒå›´é™åˆ¶åœ¨0~99
	if(Counter<Compare)	//è®¡æ•°å€¼å°äºæ¯”è¾ƒå€¼
	{
		DA=1;		//è¾“å‡º1
	}
	else				//è®¡æ•°å€¼å¤§äºæ¯”è¾ƒå€¼
	{
		DA=0;		//è¾“å‡º0
	}
}

```

