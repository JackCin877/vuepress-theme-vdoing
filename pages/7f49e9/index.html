<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨域与 JSONP | JackCin&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/vuepress-theme-vdoing/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/vuepress-theme-vdoing/assets/css/0.styles.d3d6617d.css" as="style"><link rel="preload" href="/vuepress-theme-vdoing/assets/js/app.ef19247d.js" as="script"><link rel="preload" href="/vuepress-theme-vdoing/assets/js/2.59d30681.js" as="script"><link rel="preload" href="/vuepress-theme-vdoing/assets/js/55.34e95002.js" as="script"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/10.895e47cd.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/100.65264761.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/101.4227158e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/102.f7fe8fb6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/103.e938df0b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/104.813d1e73.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/105.9cadadc4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/106.7c77f682.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/107.82ef198e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/108.239ee938.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/109.f41dec57.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/11.afdc1626.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/110.718841c6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/111.af0c9f6c.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/112.ded809e7.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/113.4b0e2248.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/114.5f1e0cca.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/115.d3bfb97a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/116.bea7171d.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/117.58e52c58.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/118.9f68c88a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/119.68f51359.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/12.d5fdc288.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/120.73fe5367.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/121.51d7018c.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/122.cf65245e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/123.f0409c02.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/13.88195303.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/14.5efb7e20.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/15.5d17711a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/16.d4ee57a8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/17.6241a69b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/18.5fe1c413.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/19.99d38ce9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/20.802498de.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/21.d8fe6e3b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/22.e54fc887.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/23.4d468f03.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/24.80e6b4d1.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/25.fd7335b6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/26.514dcbb3.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/27.4ba9baf9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/28.fe7b813f.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/29.92843dc7.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/3.b222f77d.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/30.aa8da716.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/31.c330d000.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/32.aa4aeaf8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/33.efc5afb4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/34.f788eebe.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/35.1c9cb0c9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/36.98662805.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/37.ee2e1ae8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/38.b99e909b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/39.99693b52.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/4.8052d648.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/40.886d8383.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/41.a2baf11f.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/42.88d7c3f4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/43.3426d73a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/44.17e65dff.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/45.9f3a181b.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/46.d2bbd4a8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/47.0069af15.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/48.427f0e94.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/49.6e4c55aa.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/5.0a7800d5.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/50.0f9664f8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/51.54e3e0f5.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/52.c6861735.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/53.56794768.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/54.5422e26a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/56.09649c5a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/57.79c5317f.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/58.c4607eea.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/59.001ead66.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/6.f4a7523e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/60.f509a114.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/61.a2f3e83c.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/62.0b55350e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/63.e7f1cfd6.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/64.25da2825.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/65.9dcd5846.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/66.b37138f3.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/67.2498daaf.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/68.3211a118.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/69.d1221121.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/7.122cf2b2.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/70.8b7ff9d4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/71.67dae2cc.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/72.d538ddbc.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/73.2e00bd36.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/74.39b37722.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/75.18b59a37.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/76.e08c97ed.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/77.e1e6855a.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/78.137352f0.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/79.0c8e9414.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/8.3304a2cd.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/80.d2c142fd.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/81.ce37cce5.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/82.12e52dc4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/83.5ae3c013.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/84.2908f5f9.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/85.89eb409e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/86.6197f3b8.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/87.5acaa8b4.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/88.cb33954e.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/89.bec70e95.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/9.2a799cd7.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/90.4d3dbdf5.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/91.9147f662.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/92.2ec1cc34.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/93.f4079504.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/94.128a7998.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/95.ea8b5589.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/96.2494e777.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/97.deea76f2.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/98.4c611d73.js"><link rel="prefetch" href="/vuepress-theme-vdoing/assets/js/99.897092d3.js">
    <link rel="stylesheet" href="/vuepress-theme-vdoing/assets/css/0.styles.d3d6617d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-theme-vdoing/" class="home-link router-link-active"><img src="/vuepress-theme-vdoing/img/logo.png" alt="JackCin's blog" class="logo"> <span class="site-name can-hide">JackCin's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-theme-vdoing/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vuepress-theme-vdoing/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/html/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/css/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js基础/" class="nav-link">JavaScript基础</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js高级/" class="nav-link">JavaScript高级</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/vue/" class="nav-link"> Vue</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><a href="/vuepress-theme-vdoing/up/" class="link-title">进阶</a> <span class="title" style="display:none;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/jquery/" class="nav-link">jQuery</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/d91b9c/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/fee75e/" class="nav-link">Ajax</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-theme-vdoing/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/vuepress-theme-vdoing/计算机基础/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/操作系统/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/数据结构与算法/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="单片机" class="dropdown-title"><a href="/vuepress-theme-vdoing/单片机/" class="link-title">单片机</a> <span class="title" style="display:none;">单片机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/51单片机/" class="nav-link">51单片机</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/7f49e9/404" class="nav-link">CC2530</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vuepress-theme-vdoing/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/JackCin877/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://jackcin877.github.io/image-hosting/blog/%E5%A4%8F%E7%9B%AE.4npqayre72c0.jpg"> <div class="blogger-info"><h3>JackCin</h3> <span>前端小菜鸡(✪ω✪)</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepress-theme-vdoing/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vuepress-theme-vdoing/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/html/" class="nav-link">Html</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/css/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>核心</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js基础/" class="nav-link">JavaScript基础</a></li><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/js高级/" class="nav-link">JavaScript高级</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-theme-vdoing/vue/" class="nav-link"> Vue</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><a href="/vuepress-theme-vdoing/up/" class="link-title">进阶</a> <span class="title" style="display:none;">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/jquery/" class="nav-link">jQuery</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/d91b9c/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/fee75e/" class="nav-link">Ajax</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-theme-vdoing/linux/" class="nav-link">Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/vuepress-theme-vdoing/计算机基础/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/操作系统/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/数据结构与算法/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="单片机" class="dropdown-title"><a href="/vuepress-theme-vdoing/单片机/" class="link-title">单片机</a> <span class="title" style="display:none;">单片机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/51单片机/" class="nav-link">51单片机</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/7f49e9/404" class="nav-link">CC2530</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vuepress-theme-vdoing/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vuepress-theme-vdoing/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/JackCin877/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jQuery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Ajax</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-theme-vdoing/pages/fee75e/" class="sidebar-link">服务器的级别概念与初始Ajax</a></li><li><a href="/vuepress-theme-vdoing/pages/48ccbe/" class="sidebar-link">form 表单与模板引擎</a></li><li><a href="/vuepress-theme-vdoing/pages/1d42ca/" class="sidebar-link">Ajax 加强</a></li><li><a href="/vuepress-theme-vdoing/pages/7f49e9/" aria-current="page" class="active sidebar-link">跨域与 JSONP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/7f49e9/#一、了解同源策略和跨域" class="sidebar-link">一、了解同源策略和跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_1-1-同源策略" class="sidebar-link">1.1 同源策略</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_1-1-1-什么是同源" class="sidebar-link">1.1.1 什么是同源</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_1-1-2-什么是同源策略" class="sidebar-link">1.1.2 什么是同源策略</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_1-2-跨域" class="sidebar-link">1.2 跨域</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_1-2-1-什么是跨域" class="sidebar-link">1.2.1 什么是跨域</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_1-2-2-浏览器对跨域请求的拦截" class="sidebar-link">1.2.2 浏览器对跨域请求的拦截</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_1-2-3-如何实现跨域数据请求" class="sidebar-link">1.2.3 如何实现跨域数据请求</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/7f49e9/#二-、jsonp" class="sidebar-link">二 、JSONP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_2-1-什么是-jsonp" class="sidebar-link">2.1 什么是 JSONP</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_2-2-jsonp的实现原理" class="sidebar-link">2.2 JSONP的实现原理</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_2-3-自己实现一个简单的-jsonp" class="sidebar-link">2.3 自己实现一个简单的 JSONP</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_2-4-jsonp-的缺点" class="sidebar-link">2.4 JSONP 的缺点</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_2-5-jquery-中的-jsonp" class="sidebar-link">2.5 jQuery 中的 JSONP</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_2-6-自定义参数及回调函数名称" class="sidebar-link">2.6 自定义参数及回调函数名称</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_2-7-jquery-中的-jsonp-的实现过程" class="sidebar-link">2.7 jQuery 中的 jsonp 的实现过程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/7f49e9/#三、案例-淘宝搜索" class="sidebar-link">三、案例-淘宝搜索</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-1-要实现的-ui-效果" class="sidebar-link">3.1 要实现的 UI 效果</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-2-获取用户输入的搜索关键字" class="sidebar-link">3.2 获取用户输入的搜索关键字</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-3-封装-getsuggestlist-函数" class="sidebar-link">3.3 封装 getSuggestList 函数</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-4-渲染建议列表的ui结构" class="sidebar-link">3.4 渲染建议列表的UI结构</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-4-1-定义搜索建议列表" class="sidebar-link">3.4.1 定义搜索建议列表</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-4-2-定义模板结构" class="sidebar-link">3.4.2 定义模板结构</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-4-3-定义渲染模板结构的函数" class="sidebar-link">3.4.3 定义渲染模板结构的函数</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-4-4-搜索关键字为空时隐藏搜索建议列表" class="sidebar-link">3.4.4 搜索关键字为空时隐藏搜索建议列表</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-5-输入框的防抖" class="sidebar-link">3.5 输入框的防抖</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-5-1-什么是防抖" class="sidebar-link">3.5.1 什么是防抖</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-5-2-防抖的应用场景" class="sidebar-link">3.5.2 防抖的应用场景</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-5-3-实现输入框的防抖" class="sidebar-link">3.5.3 实现输入框的防抖</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-6-缓存搜索的建议列表" class="sidebar-link">3.6 缓存搜索的建议列表</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-6-1-定义全局缓存对象" class="sidebar-link">3.6.1 定义全局缓存对象</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-6-2-将搜索结果保存到缓存对象中" class="sidebar-link">3.6.2 将搜索结果保存到缓存对象中</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_3-6-3-优先从缓存中获取搜索建议" class="sidebar-link">3.6.3 优先从缓存中获取搜索建议</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/vuepress-theme-vdoing/pages/7f49e9/#四、防抖与节流" class="sidebar-link">四、防抖与节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-1-什么是节流" class="sidebar-link">4.1 什么是节流</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-2-节流的应用场景" class="sidebar-link">4.2 节流的应用场景</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-3-节流案例-鼠标跟随" class="sidebar-link">4.3 节流案例 -鼠标跟随</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-3-1-渲染-ui-结构并美化样式" class="sidebar-link">4.3.1 渲染 UI 结构并美化样式</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-3-2-不使用节流时实现鼠标跟随效果" class="sidebar-link">4.3.2 不使用节流时实现鼠标跟随效果</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-3-3-节流阀的概念" class="sidebar-link">4.3.3 节流阀的概念</a></li><li class="sidebar-sub-header level4"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-3-4-使用节流阀优化鼠标跟随效果" class="sidebar-link">4.3.4 使用节流阀优化鼠标跟随效果</a></li><li class="sidebar-sub-header level3"><a href="/vuepress-theme-vdoing/pages/7f49e9/#_4-4-总结防抖与节流的区别" class="sidebar-link">4.4 总结防抖与节流的区别</a></li></ul></li></ul></li><li><a href="/vuepress-theme-vdoing/pages/25f678/" class="sidebar-link">HTTP 协议加强</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/vuepress-theme-vdoing/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/vuepress-theme-vdoing/up/#进阶" data-v-06225672>进阶</a></li><li data-v-06225672><a href="/vuepress-theme-vdoing/up/#Ajax" data-v-06225672>Ajax</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/JackCin877" target="_blank" title="作者" class="beLink" data-v-06225672>JackCin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-11-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">跨域与 JSONP<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="一、了解同源策略和跨域"><a href="#一、了解同源策略和跨域" class="header-anchor">#</a> 一、了解同源策略和跨域</h2> <h3 id="_1-1-同源策略"><a href="#_1-1-同源策略" class="header-anchor">#</a> 1.1 同源策略</h3> <h4 id="_1-1-1-什么是同源"><a href="#_1-1-1-什么是同源" class="header-anchor">#</a> 1.1.1 什么是同源</h4> <p>​	如果两个页面的<strong>协议</strong>，<strong>域名</strong>和<strong>端口</strong>都相同，则两个页面具有<strong>相同的源</strong>。</p> <p>​	例如，下表给出了相对于 http://www.test.com/index.html 页面的同源检测：</p> <table><thead><tr><th>URL</th> <th>是否同源</th> <th>原因</th></tr></thead> <tbody><tr><td>http://www.test.com/other.html</td> <td>是</td> <td>同源（协议、域名、端口相同）</td></tr> <tr><td>https://www.test.com/about.html</td> <td>否</td> <td>协议不同（http 与 https）</td></tr> <tr><td>http://blog.test.com/movie.html</td> <td>否</td> <td>域名不同（www.test.com 与 blog.test.com）</td></tr> <tr><td>http://www.test.com:7001/home.html</td> <td>否</td> <td>端口不同（默认的 80 端口与 7001 端口）</td></tr> <tr><td>http://www.test.com:80/main.html</td> <td>是</td> <td>同源（协议、域名、端口相同）</td></tr></tbody></table> <h4 id="_1-1-2-什么是同源策略"><a href="#_1-1-2-什么是同源策略" class="header-anchor">#</a> 1.1.2 什么是同源策略</h4> <p>​		<strong>同源策略</strong>（英文全称 Same origin policy）是<strong>浏览器</strong>提供的一个<strong>安全功能</strong>。</p> <p>​		MDN 官方给定的概念：同源策略限制了从同一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的重要安全机制。</p> <p>​		通俗的理解：浏览器规定，A 网站的 JavaScript，不允许和<strong>非同源的网站</strong> C 之间，进行资源的交互，例如：</p> <ul><li>①无法读取非同源网页的 Cookie、LocalStorage 和 IndexedDB</li> <li>②无法接触非同源网页的 DOM</li> <li>③无法向非同源地址发送 Ajax 请求</li></ul> <h3 id="_1-2-跨域"><a href="#_1-2-跨域" class="header-anchor">#</a> 1.2 跨域</h3> <h4 id="_1-2-1-什么是跨域"><a href="#_1-2-1-什么是跨域" class="header-anchor">#</a> 1.2.1 什么是跨域</h4> <p>​		<strong>同源</strong>指的是两个 URL 的<strong>协议、域名、端口</strong>一致，反之，则是<strong>跨域</strong>。</p> <p>​		出现跨域的根本原因：<strong>浏览器的同源策略</strong>不允许非同源的 URL 之间进行资源的交互。</p> <p>​		网页：http://www.test.com/index.html</p> <p>​		接口：http://www.api.com/userlist</p> <h4 id="_1-2-2-浏览器对跨域请求的拦截"><a href="#_1-2-2-浏览器对跨域请求的拦截" class="header-anchor">#</a> 1.2.2 浏览器对跨域请求的拦截</h4> <p><img src="https://jackcin877.github.io/image-hosting/Ajax/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E7%9A%84%E6%8B%A6%E6%88%AA.2whjdnecr940.jpg" alt="浏览器对跨域请求的拦截"></p> <p>​		注意：浏览器允许发起跨域请求，但是，跨域请求回来的数据，会被浏览器拦截，无法被页面获取到！</p> <h4 id="_1-2-3-如何实现跨域数据请求"><a href="#_1-2-3-如何实现跨域数据请求" class="header-anchor">#</a> 1.2.3 如何实现跨域数据请求</h4> <p>​		现如今，实现跨域数据请求，最主要的两种解决方案，分别是 <strong>JSONP</strong> 和 <strong>CORS</strong>。</p> <p>​		JSONP：出现的早，兼容性好（兼容低版本IE）。是前端程序员为了解决跨域问题，被迫想出来的一种<strong>临时解决方案</strong>。缺点是只<strong>支持 GET 请求</strong>，不支持 POST 请求。</p> <p>​		CORS：出现的较晚，它是 W3C 标准，属于跨域 Ajax 请求的根本解决方案。支持 GET 和 POST 请求。缺点是不兼容某些低版本的浏览器。</p> <h2 id="二-、jsonp"><a href="#二-、jsonp" class="header-anchor">#</a> 二 、JSONP</h2> <h3 id="_2-1-什么是-jsonp"><a href="#_2-1-什么是-jsonp" class="header-anchor">#</a> 2.1 什么是 JSONP</h3> <p>​		JSONP (JSON with Padding) 是 JSON 的一种“使用模式”，可用于解决主流浏览器的跨域数据访问的问题。</p> <h3 id="_2-2-jsonp的实现原理"><a href="#_2-2-jsonp的实现原理" class="header-anchor">#</a> 2.2 JSONP的实现原理</h3> <p>​		由于<strong>浏览器同源策略</strong>的限制，网页中<strong>无法通过 Ajax 请求非同源的接口数据</strong>。但是 &lt;script&gt; 标签不受浏览器同源策略的影响，可以通过 src 属性，请求非同源的 js 脚本。</p> <p>​		因此，JSONP 的实现原理，就是通过 &lt;script&gt; 标签的 src 属性，请求跨域的数据接口，并通过<strong>函数调用</strong>的形式，接收跨域接口响应回来的数据。</p> <h3 id="_2-3-自己实现一个简单的-jsonp"><a href="#_2-3-自己实现一个简单的-jsonp" class="header-anchor">#</a> 2.3 自己实现一个简单的 JSONP</h3> <p>​		定义一个 success 回调函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
   <span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获取到了data数据：'</span><span class="token punctuation">)</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">abc</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是abc,JSONP响应回来的数据是:'</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
	<span class="token comment">//通过 &lt;script&gt; 标签，请求接口数据：</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;http://www.liulongbin.top:3006/api/jsonp?callback=success&amp;name=zs&amp;age=20&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">//这样写就可以实现跨域请求，相当与第二个&lt;script&gt;发送请求，调用了callback指定的函数名，去到第一个&lt;script&gt; 里调用对应函数名的函数，并把后面的数据传入到data</span>
<span class="token comment">//如果把callback对应的值改为abc，就算调用abc函数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="https://jackcin877.github.io/image-hosting/Ajax/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AE%80%E5%8D%95%E7%9A%84JSONP.3fb6172h37a0.jpg" alt="自定义简单的JSONP"></p> <h3 id="_2-4-jsonp-的缺点"><a href="#_2-4-jsonp-的缺点" class="header-anchor">#</a> 2.4 JSONP 的缺点</h3> <p>​		由于 JSONP 是通过 <code>&lt;script&gt;</code> 标签的 src 属性，来实现跨域数据获取的，所以，JSONP 只支持 GET 数据请求，不支持 POST 请求。</p> <p>​		注意：<strong>JSONP</strong> <strong>和</strong> <strong>Ajax</strong> <strong>之间没有任何关系</strong>，不能把 JSONP 请求数据的方式叫做 Ajax，因为 JSONP 没有用到 XMLHttpRequest 这个对象。</p> <h3 id="_2-5-jquery-中的-jsonp"><a href="#_2-5-jquery-中的-jsonp" class="header-anchor">#</a> 2.5 jQuery 中的 JSONP</h3> <p>​		jQuery 提供的 $.ajax() 函数，除了可以发起真正的 Ajax 数据请求之外，还能够发起 JSONP 数据请求，例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.liulongbin.top:3006/api/jsonp?name=zs&amp;age=20'</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果要使用 $.ajax() 发起 JSONP 请求，必须指定 datatype 为 jsonp</span>
    <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//{message: 'JSONP 请求测试成功！您指定的回调函数名称是 jQuery341098942661740125_1668062178321', data: {…}},展开后如下：</span>

<span class="token comment">//data: {name: 'zs', age: '20'}</span>
<span class="token comment">//message: &quot;JSONP 请求测试成功！您指定的回调函数名称是 jQuery341098942661740125_1668062178321&quot;</span>
<span class="token comment">//[[Prototype]]: Object</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>​		默认情况下，使用 jQuery 发起 JSONP 请求，会自动携带一个 <strong>callback=jQueryxxx</strong> 的参数，<strong>jQueryxxx</strong> 是随机生成的一个回调函数名称。</p> <h3 id="_2-6-自定义参数及回调函数名称"><a href="#_2-6-自定义参数及回调函数名称" class="header-anchor">#</a> 2.6 自定义参数及回调函数名称</h3> <p>​		在使用 jQuery 发起 JSONP 请求时，如果想要自定义 JSONP 的<strong>参数</strong>以及<strong>回调函数名称</strong>，可以通过如下两个参数来指定：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://ajax.frontend.itheima.net:3006/api/jsonp?name=zs&amp;age=20'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span>
    <span class="token comment">// 发送到服务端的参数名称，默认值为 callback</span>
    <span class="token literal-property property">jsonp</span><span class="token operator">:</span> <span class="token string">'callback'</span><span class="token punctuation">,</span>
    <span class="token comment">// 自定义的回调函数名称，默认值为 jQueryxxx 格式</span>
    <span class="token literal-property property">jsonpCallback</span><span class="token operator">:</span> <span class="token string">'abc'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//{message: 'JSONP 请求测试成功！您指定的回调函数名称是 abc', data: {…}} 展开如下：</span>
<span class="token comment">//data: {name: 'zs', age: '20'}</span>
<span class="token comment">//message: &quot;JSONP 请求测试成功！您指定的回调函数名称是 abc&quot;</span>
<span class="token comment">//[[Prototype]]: Object</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_2-7-jquery-中的-jsonp-的实现过程"><a href="#_2-7-jquery-中的-jsonp-的实现过程" class="header-anchor">#</a> 2.7 jQuery 中的 jsonp 的实现过程</h3> <p>​		jQuery 中的 JSONP，也是通过 &lt;script&gt; 标签的 src 属性实现跨域数据访问的，只不过，jQuery 采用的是<strong>动态创建和移除</strong> <strong>&lt;script&gt;</strong> <strong>标签</strong>的方式，来发起 JSONP 数据请求。</p> <p>​		在<strong>发起 JSONP 请求</strong>的时候，动态向 <code>&lt;header&gt;</code> 中 append 一个 <code>&lt;script&gt;</code> 标签；</p> <p>​		在 <strong>JSONP 请求成功</strong>以后，动态从 <code>&lt;header&gt;</code> 中移除刚才 append 进去的 <code>&lt;script&gt;</code> 标签；</p> <h2 id="三、案例-淘宝搜索"><a href="#三、案例-淘宝搜索" class="header-anchor">#</a> 三、案例-淘宝搜索</h2> <h3 id="_3-1-要实现的-ui-效果"><a href="#_3-1-要实现的-ui-效果" class="header-anchor">#</a> 3.1 要实现的 UI 效果</h3> <p><img src="https://jackcin877.github.io/image-hosting/Ajax/%E6%B7%98%E5%AE%9D%E6%90%9C%E7%B4%A2%E6%A1%88%E4%BE%8B.19wqg7nz9hxc.jpg" alt="淘宝搜索案例"></p> <h3 id="_3-2-获取用户输入的搜索关键字"><a href="#_3-2-获取用户输入的搜索关键字" class="header-anchor">#</a> 3.2 获取用户输入的搜索关键字</h3> <p>​		为了获取到用户每次按下键盘输入的内容，需要监听输入框的 <strong>keyup</strong> 事件，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 监听文本框的 keyup 事件</span>
 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 获取用户输入的内容</span>
   <span class="token keyword">var</span> keywords <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token comment">// 判断用户输入的内容是否为空</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">keywords<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span>
   <span class="token punctuation">}</span>
   <span class="token comment">// TODO：获取搜索建议列表</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-3-封装-getsuggestlist-函数"><a href="#_3-3-封装-getsuggestlist-函数" class="header-anchor">#</a> 3.3 封装 getSuggestList 函数</h3> <p>​		将获取搜索建议列表的代码，封装到 getSuggestList 函数中，示例代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">function</span> <span class="token function">getSuggestList</span><span class="token punctuation">(</span><span class="token parameter">kw</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 指定请求的 URL 地址，其中，q 是用户输入的关键字</span>
      url<span class="token operator">:</span> <span class="token string">'https://suggest.taobao.com/sug?q='</span> <span class="token operator">+</span> kw<span class="token punctuation">,</span>
      <span class="token comment">// 指定要发起的是 JSONP 请求</span>
      dataType<span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span>
      <span class="token comment">// 成功的回调函数</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-4-渲染建议列表的ui结构"><a href="#_3-4-渲染建议列表的ui结构" class="header-anchor">#</a> 3.4 渲染建议列表的UI结构</h3> <h4 id="_3-4-1-定义搜索建议列表"><a href="#_3-4-1-定义搜索建议列表" class="header-anchor">#</a> 3.4.1 定义搜索建议列表</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> tab 栏区域 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;tabs&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 搜索区域 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;search-box&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 搜索建议列表 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;suggest-list&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_3-4-2-定义模板结构"><a href="#_3-4-2-定义模板结构" class="header-anchor">#</a> 3.4.2 定义模板结构</h4> <div class="language-JS line-numbers-mode"><pre class="language-js"><code> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 模板结构 <span class="token operator">--</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/html&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;tpl-suggestList&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>each result<span class="token punctuation">}</span><span class="token punctuation">}</span>
       <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;suggest-item&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>$value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-4-3-定义渲染模板结构的函数"><a href="#_3-4-3-定义渲染模板结构的函数" class="header-anchor">#</a> 3.4.3 定义渲染模板结构的函数</h4> <div class="language-JS line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 渲染建议列表</span>
 <span class="token keyword">function</span> <span class="token function">renderSuggestList</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果没有需要渲染的数据，则直接 return</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#suggest-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 渲染模板结构</span>
    <span class="token keyword">var</span> htmlStr <span class="token operator">=</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">'tpl-suggestList'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#suggest-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>htmlStr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_3-4-4-搜索关键字为空时隐藏搜索建议列表"><a href="#_3-4-4-搜索关键字为空时隐藏搜索建议列表" class="header-anchor">#</a> 3.4.4 搜索关键字为空时隐藏搜索建议列表</h4> <div class="language-JS line-numbers-mode"><pre class="language-js"><code> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取用户输入的内容</span>
    <span class="token keyword">var</span> keywords <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 判断用户输入的内容是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">keywords<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// 如果关键词为空，则清空后隐藏搜索建议列表</span>
       <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#suggest-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">getSuggestList</span><span class="token punctuation">(</span>keywords<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-5-输入框的防抖"><a href="#_3-5-输入框的防抖" class="header-anchor">#</a> 3.5 输入框的防抖</h3> <h4 id="_3-5-1-什么是防抖"><a href="#_3-5-1-什么是防抖" class="header-anchor">#</a> 3.5.1 什么是防抖</h4> <p>​		<strong>防抖策略</strong>（debounce）是当事件被触发后，延迟 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时。</p> <p><img src="https://jackcin877.github.io/image-hosting/Ajax/%E9%98%B2%E6%8A%96%E7%AD%96%E7%95%A5.3la0ksk7fym0.jpg" alt="防抖策略"></p> <h4 id="_3-5-2-防抖的应用场景"><a href="#_3-5-2-防抖的应用场景" class="header-anchor">#</a> 3.5.2 防抖的应用场景</h4> <p>​		用户在输入框中连续输入一串字符时，可以通过防抖策略，只在输入完后，才执行查询的请求，这样可以有效减少请求次数，节约请求资源；</p> <h4 id="_3-5-3-实现输入框的防抖"><a href="#_3-5-3-实现输入框的防抖" class="header-anchor">#</a> 3.5.3 实现输入框的防抖</h4> <div class="language-JS line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>                    <span class="token comment">// 1. 防抖动的 timer</span>

 <span class="token keyword">function</span> <span class="token function">debounceSearch</span><span class="token punctuation">(</span><span class="token parameter">keywords</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 2. 定义防抖的函数</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 发起 JSONP 请求</span>
    <span class="token function">getSuggestList</span><span class="token punctuation">(</span>keywords<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 3. 在触发 keyup 事件时，立即清空 timer</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    <span class="token comment">// ...省略其他代码</span>
    <span class="token function">debounceSearch</span><span class="token punctuation">(</span>keywords<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-6-缓存搜索的建议列表"><a href="#_3-6-缓存搜索的建议列表" class="header-anchor">#</a> 3.6 缓存搜索的建议列表</h3> <h4 id="_3-6-1-定义全局缓存对象"><a href="#_3-6-1-定义全局缓存对象" class="header-anchor">#</a> 3.6.1 定义全局缓存对象</h4> <div class="language-JS line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 缓存对象</span>
  <span class="token keyword">var</span> cacheObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3-6-2-将搜索结果保存到缓存对象中"><a href="#_3-6-2-将搜索结果保存到缓存对象中" class="header-anchor">#</a> 3.6.2 将搜索结果保存到缓存对象中</h4> <div class="language-JS line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 渲染建议列表</span>
 <span class="token keyword">function</span> <span class="token function">renderSuggestList</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...省略其他代码</span>
    <span class="token comment">// 将搜索的结果，添加到缓存对象中</span>
    <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    cacheObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> res
 <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-6-3-优先从缓存中获取搜索建议"><a href="#_3-6-3-优先从缓存中获取搜索建议" class="header-anchor">#</a> 3.6.3 优先从缓存中获取搜索建议</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 监听文本框的 keyup 事件</span>
 <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ipt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...省略其他代码</span>

    <span class="token comment">// 优先从缓存中获取搜索建议</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">cacheObj<span class="token punctuation">[</span>keywords<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token function">renderSuggestList</span><span class="token punctuation">(</span>cacheObj<span class="token punctuation">[</span>keywords<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 获取搜索建议列表</span>
    <span class="token function">debounceSearch</span><span class="token punctuation">(</span>keywords<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="四、防抖与节流"><a href="#四、防抖与节流" class="header-anchor">#</a> 四、防抖与节流</h2> <h3 id="_4-1-什么是节流"><a href="#_4-1-什么是节流" class="header-anchor">#</a> 4.1 什么是节流</h3> <p>​		<strong>节流策略</strong>（throttle），顾名思义，可以减少一段时间内事件的触发频率。</p> <p><img src="https://jackcin877.github.io/image-hosting/Ajax/%E8%8A%82%E6%B5%81%E7%AD%96%E7%95%A5.19b2m5maqi00.jpg" alt="节流策略"></p> <h3 id="_4-2-节流的应用场景"><a href="#_4-2-节流的应用场景" class="header-anchor">#</a> 4.2 节流的应用场景</h3> <p>​		①鼠标连续不断地触发某事件（如点击），只在单位时间内只触发一次；</p> <p>​		②懒加载时要监听计算滚动条的位置，但不必每次滑动都触发，可以降低计算的频率，而不必去浪费 CPU 资源；</p> <h3 id="_4-3-节流案例-鼠标跟随"><a href="#_4-3-节流案例-鼠标跟随" class="header-anchor">#</a> 4.3 节流案例 -鼠标跟随</h3> <iframe height="500" scrolling="no" title="节流鼠标跟随" src="https://codepen.io/JackCin877/embed/zYaKmbE?default-tab=js%2Cresult&amp;theme-id=dark" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="allowfullscreen" style="width:100%;">
  See the Pen <a href="https://codepen.io/JackCin877/pen/zYaKmbE">
  节流鼠标跟随</a> by JackCin877 (<a href="https://codepen.io/JackCin877">@JackCin877</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe> <h4 id="_4-3-1-渲染-ui-结构并美化样式"><a href="#_4-3-1-渲染-ui-结构并美化样式" class="header-anchor">#</a> 4.3.1 渲染 UI 结构并美化样式</h4> <div class="language-css line-numbers-mode"><pre class="language-css"><code>&lt;!-- UI 结构 --&gt;
&lt;img src=<span class="token string">&quot;./assets/angel.gif&quot;</span> alt=<span class="token string">&quot;&quot;</span> id=<span class="token string">&quot;angel&quot;</span> /&gt;

<span class="token comment">/* CSS 样式 */</span>
<span class="token selector">html, body</span> <span class="token punctuation">{</span>
  margin<span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  padding<span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  overflow<span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">#angel</span> <span class="token punctuation">{</span>
  position<span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_4-3-2-不使用节流时实现鼠标跟随效果"><a href="#_4-3-2-不使用节流时实现鼠标跟随效果" class="header-anchor">#</a> 4.3.2 不使用节流时实现鼠标跟随效果</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 获取图片元素</span>
   <span class="token keyword">var</span> angel <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#angel'</span><span class="token punctuation">)</span>
   <span class="token comment">// 监听文档的 mousemove 事件</span>
   <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 设置图片的位置</span>
      <span class="token function">$</span><span class="token punctuation">(</span>angel<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>pageY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_4-3-3-节流阀的概念"><a href="#_4-3-3-节流阀的概念" class="header-anchor">#</a> 4.3.3 节流阀的概念</h4> <p>​		高铁卫生间是否被占用，由红绿灯控制，红灯表示被占用，绿灯表示可使用。</p> <p>​		假设每个人上卫生间都需要花费5分钟，则五分钟之内，被占用的卫生间无法被其他人使用。</p> <p>​		上一个人使用完毕后，需要将红灯<strong>重置</strong>为绿灯，表示下一个人可以使用卫生间。</p> <p>​		下一个人在上卫生间之前，需要<strong>先判断控制灯</strong>是否为绿色，来知晓能否上卫生间。</p> <p>​		节流阀为<strong>空</strong>，表示<strong>可以执行下次操作</strong>；<strong>不为空</strong>，表示<strong>不能执行下次操作</strong>。</p> <p>​		当前操作执行完，必须将节流阀<strong>重置</strong>为空，表示可以执行下次操作了。</p> <p>​		每次执行操作前，必须<strong>先判断节流阀是否为空</strong>。</p> <h4 id="_4-3-4-使用节流阀优化鼠标跟随效果"><a href="#_4-3-4-使用节流阀优化鼠标跟随效果" class="header-anchor">#</a> 4.3.4 使用节流阀优化鼠标跟随效果</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> angel <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#angel'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 1.预定义一个 timer 节流阀</span>
  <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">timer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span> <span class="token comment">// 3.判断节流阀是否为空，如果不为空，则证明距离上次执行间隔不足16毫秒</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">$</span><span class="token punctuation">(</span>angel<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'left'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>pageX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>pageY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">)</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 2.当设置了鼠标跟随效果后，清空 timer 节流阀，方便下次开启延时器</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_4-4-总结防抖与节流的区别"><a href="#_4-4-总结防抖与节流的区别" class="header-anchor">#</a> 4.4 总结防抖与节流的区别</h3> <ul><li><p>防抖：如果事件被频繁触发，防抖能保证只有最后一次触发生效！前面 N 多次的触发都会被忽略！</p></li> <li><p>节流：如果事件被频繁触发，节流能够减少事件触发的频率，因此，节流是有选择性地执行一部分事件！</p></li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/JackCin877/vuepress-theme-vdoing/edit/master/docs/02.进阶/30.Ajax/15.跨域与 JSONP.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/11/10, 14:51:13</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/vuepress-theme-vdoing/pages/1d42ca/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Ajax 加强</div></a> <a href="/vuepress-theme-vdoing/pages/25f678/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">HTTP 协议加强</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vuepress-theme-vdoing/pages/1d42ca/" class="prev">Ajax 加强</a></span> <span class="next"><a href="/vuepress-theme-vdoing/pages/25f678/">HTTP 协议加强</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/vuepress-theme-vdoing/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/vuepress-theme-vdoing/pages/188689/"><div>
            51单片机及补充知识
            <!----></div></a> <span class="date">09-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/vuepress-theme-vdoing/pages/b10f7a/"><div>
            独立按键
            <!----></div></a> <span class="date">09-13</span></dt></dl><dl><dd>03</dd> <dt><a href="/vuepress-theme-vdoing/pages/b4d59b/"><div>
            LCD1602液晶显示器
            <!----></div></a> <span class="date">09-13</span></dt></dl> <dl><dd></dd> <dt><a href="/vuepress-theme-vdoing/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:2269233033@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/JackCin877" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/vuepress-theme-vdoing/assets/js/app.ef19247d.js" defer></script><script src="/vuepress-theme-vdoing/assets/js/2.59d30681.js" defer></script><script src="/vuepress-theme-vdoing/assets/js/55.34e95002.js" defer></script>
  </body>
</html>
