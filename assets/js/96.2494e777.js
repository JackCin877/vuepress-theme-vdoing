(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{421:function(s,t,a){"use strict";a.r(t);var n=a(3),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"串口通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#串口通信"}},[s._v("#")]),s._v(" 串口通信")]),s._v(" "),t("h3",{attrs:{id:"_1、串口的基本原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、串口的基本原理"}},[s._v("#")]),s._v(" 1、串口的基本原理")]),s._v(" "),t("ul",[t("li",[s._v("详细看两位大佬的博客，这里只简单写寄存器的配置和函数")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://qrschenze.blog.csdn.net/article/details/125028531",target:"_blank",rel:"noopener noreferrer"}},[s._v("(13条消息) 『51单片机』串口通信配置_謓泽的博客-CSDN博客_51单片机串口配置"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/weixin_66578482/article/details/124935337?ops_request_misc=&request_id=8909a46a040d44228e894ff3c77d01c1&biz_id=&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~koosearch~default-2-124935337-null-null.268%5Ev1%5Econtrol&utm_term=%E4%B8%B2%E5%8F%A3&spm=1018.2226.3001.4450",target:"_blank",rel:"noopener noreferrer"}},[s._v("（七）51单片机基础——串口通信_51单片机串口分时复用_花园宝宝小点点的博客-CSDN博客"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"_2、初始化窗口函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、初始化窗口函数"}},[s._v("#")]),s._v(" 2、初始化窗口函数")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/bfaef722072b4ac58f3b9d43c96f1d89.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rO95aWA,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("UART_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//**1.配置SCON串行控制寄存器** ")]),s._v("\n\tSCON "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x40")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t\n\tTMOD "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0F")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//0000 0000 & 0000 1111 定时器1的话高四位清0 定时器0的话低四位清0 ")]),s._v("\n\tTMOD "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//0000 0000 | 0010 0000")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2.设置初始时间")]),s._v("\n\tTL1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0xFA")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t\n\tTH1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0xFA")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   \t "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3.禁止T1(定时器1)中断")]),s._v("\n\tET1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//4.配置TCON")]),s._v("\n\tTR1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//开启T1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h4",{attrs:{id:"_2-1-配置scon串行控制寄存器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-配置scon串行控制寄存器"}},[s._v("#")]),s._v(" 2.1 "),t("strong",[s._v("配置SCON串行控制寄存器")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/4978d6092eab4bc8bcf56645f355f84b.png",alt:"img"}})]),s._v(" "),t("p",[s._v("注→串行控制寄存器为"),t("strong",[s._v("可位寻址")]),s._v(":可以单独的对一位寄存器进行赋值。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("B7→"),t("strong",[s._v("FE")]),s._v(":"),t("strong",[s._v("检测帧错误")]),s._v("，也就是说它有一个奇校验和偶校验。如果错误的话就会在这一位当中检测FE这个帧错误。注:"),t("strong",[s._v("当我们去使用⒏位串口的时候就不需要来检测这个帧错误了")]),s._v("。这里所说的是『模式1：8位UART[⒈个字节]，波特率可变』— 最常用的一个模式。")])]),s._v(" "),t("li",[t("p",[s._v("B7→"),t("strong",[s._v("SM0")]),s._v(" = 0")])]),s._v(" "),t("li",[t("p",[s._v("B6→"),t("strong",[s._v("SM1")]),s._v(" = 1 [决定工作模式,在这里我们是工作模式⒈]")]),s._v(" "),t("ul",[t("li",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/56259090782c4b22b66d554ac0a182fd.png",alt:"img"}})])])]),s._v(" "),t("li",[t("p",[s._v("B5→"),t("strong",[s._v("SM2")]),s._v(" = 0 [多机通信是方式⒉和方式⒊的，如果是这两个的话设置SM2 = 1反之SM2 = 0]")])]),s._v(" "),t("li",[t("p",[s._v("B4→"),t("strong",[s._v("REN")]),s._v(" = 1||0 [是否允许它进行接收RXD，如果REN = 0的话就是不允许接收 REN = 1的话就是允许接收。"),t("strong",[s._v("想让单片机接收数据的话就置为1，不想让单片机接收就置为0")]),s._v("]")])]),s._v(" "),t("li",[t("p",[s._v("B3→"),t("strong",[s._v("TB8")]),s._v(" = 0 [方式三和方式二置1用于发送第⑨位数据，方式一置0]")])]),s._v(" "),t("li",[t("p",[s._v("B2→"),t("strong",[s._v("RB8")]),s._v(" = 0 [方式三和方式二置1用于接收第⑨位数据，方式一置0]")])]),s._v(" "),t("li",[t("p",[s._v("B1→TI = 0 [初始化配置给0]")])]),s._v(" "),t("li",[t("p",[s._v("B0→RI = 0 [初始化配置给0]")]),s._v(" "),t("ul",[t("li",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/18d7b1fddc8b4cd69d46aeed3998403b.png",alt:"img"}})])])]),s._v(" "),t("li",[t("p",[s._v("关于为什么接收到数据就会中断的说明:")]),s._v(" "),t("ul",[t("li",[t("ol",[t("li",[s._v("首先和内部结构有关，要结合串口通信内部结构来理解。")])])]),s._v(" "),t("li",[t("ol",{attrs:{start:"2"}},[t("li",[s._v("串口在接收到数据之后，"),t("strong",[s._v("硬件会自动将RI=1")]),s._v("。")])])]),s._v(" "),t("li",[t("ol",{attrs:{start:"3"}},[t("li",[s._v("控制串口中断的逻辑门是或门")])])]),s._v(" "),t("li",[t("ol",{attrs:{start:"4"}},[t("li",[s._v("只要RI>=1或者TI>=1就会触发串口中断。前提是程序打开了总中断和串口中断。")])])])])])]),s._v(" "),t("h4",{attrs:{id:"_2-2-配置定时器1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置定时器1"}},[s._v("#")]),s._v(" 2.2 配置定时器1")]),s._v(" "),t("h5",{attrs:{id:"_2-2-1-配置tmod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-配置tmod"}},[s._v("#")]),s._v(" 2.2.1 配置TMOD")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jackcin877.github.io/image-hosting/51MUC/%E5%AE%9A%E6%97%B6%E5%99%A8%E6%97%B6%E9%92%9F.5vxsmw3ya440.webp",alt:"定时器时钟"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/2d6c9b6c6a26464799ae68144e4f9e55.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rO95aWA,size_20,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/a1303ee842ee425d81c25dde1bb1a225.png",alt:"img"}})]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("注→")]),s._v("这个串口只能配置定时器⒈这是它专用的。")])]),s._v(" "),t("li",[t("p",[s._v("这里配置"),t("strong",[s._v("定时器1的M1=1,M0=0")]),s._v("，即为"),t("strong",[s._v("8位重装定时器")]),s._v("。")])]),s._v(" "),t("li",[t("p",[s._v("😎"),t("strong",[s._v("模式2→8位自动重装模式，这个算是第二个最常用的一个模式。第二种模式主要用于串口通信")]),s._v("产生波特率**来用的『在电子通信领域，波特(Baud)即调制速率，指的是有效数据讯号调制载波的速率，即单位时间内载波调制状态变化的次数』")])])]),s._v(" "),t("h5",{attrs:{id:"_2-2-2-配置-tcon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-配置-tcon"}},[s._v("#")]),s._v(" 2.2.2 配置 TCON")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/473447333c964a9fac7c31f765bafdf8.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5rO95aWA,size_18,color_FFFFFF,t_70,g_se,x_16",alt:"img"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/978662b6c9264a40bc137d30d87e002c.png",alt:"img"}})]),s._v(" "),t("ul",[t("li",[s._v("IE和IT都是外部中断使用的，所以我们不用去管")]),s._v(" "),t("li",[t("img",{attrs:{src:"https://jackcin877.github.io/image-hosting/51MUC/TCON.60mk9beosls0.webp",alt:"TCON"}})])]),s._v(" "),t("h3",{attrs:{id:"_3、电脑通过串口控制led"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、电脑通过串口控制led"}},[s._v("#")]),s._v(" 3、电脑通过串口控制LED")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("main.c")])]),s._v(" "),t("li",[t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<REGX52.H>")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UART.h"')])]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("UART_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("UART_Routine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" interrupt "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//如果接收标志位为1,接收到了数据.[之所以需要判断是因为我们要区分接收RI=TXD和发送TI=RXD]")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("RI"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\tP2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("SBUF"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//读取数据，取反后输出到LED  SBUF在等号的右边说明它是接收位")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("UART_SendByte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SBUF"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将接收到的数据发回串口")]),s._v("\n\t\t\tRI"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//将接收到的数据发回串口")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("UART.c")])]),s._v(" "),t("li",[t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("<REGX52.H>")])]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n  * @brief  串口初始化，4800bps@11.0592MHz\n  * @param  无\n  * @retval 无\n  */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("UART_Init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tPCON "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使能波特率倍速位SMOD")]),s._v("\n\t\n\tSCON "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x50")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//8位数据,可变波特率(本次代码不需要去接收数据，所以写0x40就行，要接收就应该是0x50)")]),s._v("\n\tTMOD "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x0F")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//清除定时器1模式位")]),s._v("\n\tTMOD "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x20")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设定定时器1为8位自动重装方式")]),s._v("\n\t\n\tTL1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0xF4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设定定时初值")]),s._v("\n\tTH1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0xF4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设定定时器重装值")]),s._v("\n\t\n\tTR1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//启动定时器1")]),s._v("\n\t\n\tET1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//禁止定时器1中断")]),s._v("\n\t\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//开启串口中断")]),s._v("\n\t\n\tES"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tEA"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n  * @brief  串口发送一个字节数据\n  * @param  Byte 要发送的一个字节数据\n  * @retval 无\n  */")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("UART_SendByte")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" Byte"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tSBUF"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Byte"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送-单片机向电脑发送数据")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TI"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//判断是否发送成功，发送成功TI会硬件置1")]),s._v("\n\tTI"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//软件置0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//串口中断函数模板")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//void UART_Routine() interrupt 4")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//\tif(RI==1) //接收到数据，RI会自动置1，然后我们想要软件置0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//\t\t{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//\t\t\tRI=0;  //软件置0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//\t\t}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//}")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);